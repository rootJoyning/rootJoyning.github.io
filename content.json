[{"title":"æœåŠ¡é€šä¿¡ä»‹ç»","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/æœåŠ¡é€šä¿¡/ros_æœåŠ¡é€šä¿¡ä»‹ç»/","text":"æœåŠ¡é€šä¿¡ä»‹ç»1.â€ros2 service list -tâ€ï¼šæŸ¥çœ‹ros2çš„æœåŠ¡åˆ—è¡¨ï¼Œè¿”å›å†…å®¹å…·ä½“æ ¼å¼:æœåŠ¡åç§° æ¶ˆæ¯æ¥å£&#x2F;æœåŠ¡æ¥å£ç±»å‹ã€‚ 2.â€ros2 interface show æ¶ˆæ¯æ¥å£â€ï¼šæŸ¥çœ‹æ¶ˆæ¯æ¥å£å…·ä½“å®šä¹‰ï¼ˆæ¶ˆæ¯å¡«å……ï¼‰ã€‚ 3.â€ros2 service call æœåŠ¡åç§° æ¶ˆæ¯æ¥å£ â€˜{æ¶ˆæ¯æ¥å£å…·ä½“å¡«å……}â€™ï¼šè°ƒç”¨å…·ä½“æœåŠ¡ã€‚ ã€æ³¨ã€‘ï¼šæ¶ˆæ¯æ¥å£çš„å…·ä½“å¡«å……ï¼Œâ€{å‚æ•°1: æ•°å€¼,å‚æ•°2: æ•°å€¼,â€¦}â€ã€‚å†’å·æ•°å€¼é—´æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚4.å¯ä»¥ä½¿ç”¨ros2ä¸­çš„å¯è§†åŒ–å·¥å…·rqté€‰å–æœåŠ¡ã€‚ï¼ˆplugins-&gt;services-&gt;service callerä¸­å¯ä»¥é…ç½®ï¼‰ã€‚ 5.å‚æ•°è¢«è§†ä¸ºèŠ‚ç‚¹çš„è®¾ç½®ï¼Œæ˜¯åŸºäºæœåŠ¡é€šä¿¡å®ç°çš„ã€‚ 6.â€ros2 param listâ€ï¼šæŸ¥çœ‹ros2çš„å‚æ•°åˆ—è¡¨ã€‚ 7.â€ros2 param describe åŒ…å å‚æ•°åç§°â€ï¼šæŸ¥çœ‹å‚æ•°çš„å…·ä½“ä¿¡æ¯ã€‚ 8.â€ros2 param get åŒ…å å‚æ•°åç§°â€ï¼šè·å¾—å‚æ•°çš„å€¼ã€‚ 9.â€ros2 param set åŒ…å ä¿®æ”¹çš„å‚æ•°åç§° ä¿®æ”¹æ•°å€¼â€ï¼šä¿®æ”¹å‚æ•°çš„å€¼ã€‚ 10.â€ros2 param dump åŒ…å &gt; é…ç½®æ–‡ä»¶(.yaml)â€ï¼šå°†åŒ…ç°åœ¨çš„å‚æ•°å†™å…¥é…ç½®æ–‡ä»¶ã€‚ 11.â€ros2 run åŒ…å èŠ‚ç‚¹å â€“ros-args â€“params-file é…ç½®æ–‡ä»¶â€ï¼šè¿è¡ŒèŠ‚ç‚¹æ—¶å°±æ ¹æ®é…ç½®æ–‡ä»¶å°†èŠ‚ç‚¹é…ç½®ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Service_communication","slug":"Service-communication","permalink":"http://example.com/tags/Service-communication/"}]},{"title":"ros_ä½¿ç”¨launchå¯åŠ¨å¤šä¸ªèŠ‚ç‚¹ï¼ˆåŸºç¡€ç‰ˆï¼‰","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/æœåŠ¡é€šä¿¡/ros_ä½¿ç”¨launchå¯åŠ¨å¤šä¸ªèŠ‚ç‚¹/","text":"ä½¿ç”¨launchå¯åŠ¨å¤šä¸ªèŠ‚ç‚¹1.ä½¿ç”¨launchå¯åŠ¨å¤šä¸ªèŠ‚ç‚¹ï¼š â€œgenerate_launch_description()â€ï¼šäº§ç”Ÿlaunchæè¿°ã€æ³¨æ„è¯¥å‡½æ•°åå­—æ˜¯å›ºå®šçš„ã€‘ï¼›å…¶è¿”å›å€¼ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œè¿”å›actionsåŠ¨ä½œ(æ˜¯ä¸€ä¸ªæ•°ç»„)ã€‚ å…³äºc++ç‰ˆæœ¬å°†launchæ–‡ä»¶å†™åˆ°install&#x2F;libä¸‹ï¼Œä½¿ç”¨â€install(DIRECTORY launch DESTINATION share&#x2F;${PROJECT_NAME})â€ã€‚ã€æ›´æ–¹ä¾¿ã€‘ å…³äºpythonç‰ˆæœ¬å°†launchæ–‡ä»¶å†™åˆ°install&#x2F;libä¸‹ï¼Œä½¿ç”¨â€ â€˜share&#x2F;â€˜+package_name+â€™&#x2F;launchâ€™,glob(â€˜launch&#x2F;*.launch.pyâ€™)â€ [æ³¨æ„]ï¼šä¸Šè¿°æ“ä½œéœ€è¦å¼•å…¥globeåŒ…[from glob import glob]ã€‚ pythonä¸­çš„globå‡½æ•°ï¼šç”¨äºæŸ¥æ‰¾ç¬¦åˆç‰¹å®šè§„åˆ™çš„æ–‡ä»¶ï¼Œéœ€è¦ä¼ å…¥æŒ‡å®šåŒ¹é…çš„è·¯å¾„å­—ç¬¦ä¸²ï¼Œè¿”å›å€¼ä¸ºå½“å‰ç›®å½•ä¸‹æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶(ä¸åŒ…å«å­ç›®å½•ä¸‹çš„)ã€‚ launchè„šæœ¬çš„å¯åŠ¨ï¼Œâ€ros2 launch åŒ…å launchæ–‡ä»¶åâ€ã€‚ â€œsource è·¯å¾„â€ï¼šå°†è·¯å¾„åŠ å…¥åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œç›¸å½“äºæ¿€æ´»è¯¥åŒºåŸŸã€‚ 2.ä½¿ç”¨launchä¼ é€’å‚æ•°ï¼š å£°æ˜ä¸€ä¸ªlaunchå‚æ•°ï¼šlaunch.actions.DeclareLaunchArgument(â€˜å‚æ•°åå­—â€™,default_value&#x3D;â€é»˜è®¤å‚æ•°å€¼â€,(å¯é€‰)description&#x3D;â€ç»™è¯¥å‚æ•°ä¸€ä¸ªå¤‡æ³¨â€) æŠŠlaunchçš„å‚æ•°æ‰‹åŠ¨ä¼ ç»™æŸèŠ‚ç‚¹ï¼š â€œlaunch.substitutions.LaunchConfiguration(â€˜å‚æ•°åç§°â€™,â€é»˜è®¤å‚æ•°å€¼â€)â€:å¯¹å‚æ•°å€¼è¿›è¡Œæ›¿æ¢ã€‚ åœ¨éœ€è¦ä¼ å…¥å‚æ•°çš„èŠ‚ç‚¹å¤„æ·»åŠ å±æ€§parameters&#x3D;[{èŠ‚ç‚¹å‚æ•°å:launch.substitutions.LaunchConfiguration(â€˜å‚æ•°åç§°â€™,default&#x3D;â€é»˜è®¤å‚æ•°å€¼â€)}]ã€‚3.è¿è¡Œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ï¼šros2 launch åŒ…å launchæ–‡ä»¶å è‡ªå®šä¹‰å‚æ•°å:&#x3D;å‚æ•°å€¼ã€‚ 3.launchä¸‰å¤§ç»„ä»¶(4.6.3) åŠ¨ä½œï¼šä¸€ä¸ªèŠ‚ç‚¹ã€ä¸€å¥æ‰“å°ã€ä¸€æ®µç»ˆç«¯æŒ‡ä»¤ã€å¦ä¸€ä¸ªç»ˆç«¯æ–‡ä»¶ç­‰ æ›¿æ¢ï¼šä½¿ç”¨launchçš„å‚æ•°æ›¿æ¢èŠ‚ç‚¹çš„å‚æ•°å€¼(æœªå­¦) æ¡ä»¶ï¼šå¯ä»¥å†³å®šå“ªäº›èŠ‚ç‚¹å¯åŠ¨ï¼Œå“ªäº›ä¸å¯åŠ¨ï¼Œç›¸å½“äºif(æœªå­¦) ä»£ç å®ä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334import launchimport launch_rosdef generate_launch_description(): # ç”Ÿæˆlaunchæè¿°ã€æ³¨æ„è¯¥å‡½æ•°åå­—æ˜¯å›ºå®šçš„ã€‘ # 1.å£°æ˜ä¸€ä¸ªlaunchå‡½æ•° action_declare_arg_background_g = launch.actions.DeclareLaunchArgument(&#x27;bg_param&#x27;, default_value=&quot;150&quot;) action_node_turtle_client = launch_ros.actions.Node( # ä¼ å…¥åŒ…ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å’Œæ—¥å¿—è¾“å‡ºçš„ä½ç½® package = &#x27;demo_cpp_service&#x27;, executable = &#x27;turtle_client&#x27;, output = &#x27;screen&#x27; ) action_node_turtle_control = launch_ros.actions.Node( # ä¼ å…¥åŒ…ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å’Œæ—¥å¿—è¾“å‡ºçš„ä½ç½® package = &#x27;demo_cpp_service&#x27;, executable = &#x27;turtle_control&#x27;, output = &#x27;screen&#x27; ) # 2.æŠŠlaunchçš„å‚æ•°æ‰‹åŠ¨ä¼ é€’ç»™æŸä¸ªå‚æ•° &#x27;&#x27;&#x27;äº§ç”Ÿlaunchæè¿°&#x27;&#x27;&#x27; action_node_turtle_node = launch_ros.actions.Node( # ä¼ å…¥åŒ…ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å’Œæ—¥å¿—è¾“å‡ºçš„ä½ç½® package = &#x27;turtlesim&#x27;, executable = &#x27;turtlesim_node&#x27;, parameters =[&#123;&#x27;background_g&#x27;:launch.substitutions.LaunchConfiguration(&#x27;bg_param&#x27;,default=&quot;150&quot;)&#125;], output = &#x27;screen&#x27;, ) return launch.LaunchDescription([ action_node_turtle_client, action_node_turtle_control, action_node_turtle_node, ]) ã€è¡¥å……ã€‘ï¼š DeclareLaunchArgument(å‚æ•°åç§°,default_name&#x3D;â€é»˜è®¤å–å€¼â€,description&#x3D;â€å‚æ•°çš„æè¿°â€)ï¼šå£°æ˜launchæ–‡ä»¶å¯ä»¥ä¿®æ”¹çš„å‚æ•°ã€‚ã€å£°æ˜ä¸€ä¸ªå‚æ•°ã€‘ LaunchConfiguration(â€œåœ¨DeclareLaunchArgumentä¸­å£°æ˜è¿‡çš„åŠ¨æ€å‚æ•°åç§°â€)ï¼šåœ¨å¯åŠ¨æ–‡ä»¶ä¸­ç”¨äºåŠ¨æ€é…ç½®å‚æ•°ã€èŠ‚ç‚¹é€‰é¡¹ç­‰çš„ä¸€ç§æœºåˆ¶ã€‚å¯ä»¥åœ¨è¿è¡Œæˆ–è€…å¯åŠ¨æ–‡ä»¶æ—¶çµæ´»è°ƒæ•´å‚æ•°ã€‚ä¸€èˆ¬ä¸â€DeclareLaunchArgument()â€é…å¥—ä½¿ç”¨ã€‚ã€å¼•ç”¨ä¸€ä¸ªå‚æ•°ã€‘ å¯åŠ¨ä¸¤ä¸ªå°æµ·é¾Ÿæ¨¡æ‹Ÿå™¨çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425262728293031import launchimport launch_rosfrom ament_index_python.packages import get_package_share_directory&quot;&quot;&quot;&quot;å¤ªè¯¡å¼‚äº†è¿™ä¸ªä»£ç OTZ&quot;&quot;&quot;def generate_launch_description(): # è¿™ä¸ªåŠ¨ä½œå®é™…ä¸Šå°±æ˜¯å¯åŠ¨ä¸¤ä¸ªå°æµ·é¾Ÿæ¨¡æ‹Ÿå™¨ # åŠ¨ä½œ1ï¼šå¯åŠ¨å…¶å®ƒlaunch action_launch_path = [get_package_share_directory(&#x27;turtlesim&#x27;),&#x27;/launch/&#x27;,&#x27;multisim.launch.py&#x27;] # å› ä¸ºè¯¥launchæ–‡ä»¶åœ¨ä¸åŒåœºæ™¯å‡éœ€è¦å¯åŠ¨ï¼Œæ•…å¯å°†å…¶åŒ…å«åˆ°ä¸åŒçš„çˆ¶launchæ–‡ä»¶ä¸­ã€‚ action_include_launch = launch.actions.IncludeLaunchDescription(launch.launch_description_sources.PythonLaunchDescriptionSource(action_launch_path)) # åŠ¨ä½œ2ï¼šæ‰“å°è¿™ä¸ªè·¯å¾„ action_launch_info = launch.actions.LogInfo(msg=str(action_launch_path)) # åŠ¨ä½œ3ï¼šæ‰§è¡Œè¿›ç¨‹ï¼Œå³æ‰§è¡Œä¸€ä¸ªå‘½ä»¤è¡Œ action_topic_list = launch.actions.ExecuteProcess(cmd=[&#x27;ros2&#x27;,&#x27;topic&#x27;,&#x27;list&#x27;]) # åŠ¨ä½œ4ï¼šç»„ç»‡åŠ¨ä½œæˆç»„ï¼ŒæŠŠå¤šä¸ªåŠ¨ä½œæ”¾ä¸€ä¸ªç»„ action_group = launch.actions.GroupAction([ # åŠ¨ä½œ5ï¼šå®šæ—¶å™¨ launch.actions.TimerAction(period=2.0,actions=[action_include_launch]), launch.actions.TimerAction(period=4.0,actions=[action_topic_list]) ]) return launch.LaunchDescription([ # æ‰§è¡Œé¡ºåºï¼šæ‰“å°è·¯å¾„--&gt;(æ‰§è¡ŒåŠ¨ä½œç»„ä¸­çš„)å¯åŠ¨ä¸¤ä¸ªå°æµ·é¾Ÿæ¨¡æ‹Ÿå™¨--&gt;(æ‰§è¡ŒåŠ¨ä½œç»„ä¸­çš„)æ‰§è¡Œä¸€ä¸ªå‘½ä»¤è¡Œ action_launch_info, action_group ]) IncludeLaunchDescription()ï¼š ä¸»è¦ä½œç”¨æ˜¯åŒ…å«å…¶ä»–Launchæ–‡ä»¶ã€‚ å®ƒæ˜¯ä¸€ä¸ªåŠ¨ä½œ(launch.actionsæ¨¡å—ä¸­çš„ç±»)ã€‚ PythonLaunchDescriptionSource()ï¼š æ˜¯IncludeLaunchDescription()ä¸€ä¸ªæ¥æºç±»ï¼Œå®ƒæŒ‡å®šæ‰€åŒ…å«çš„launchæ–‡ä»¶æ˜¯pythonæ ¼å¼çš„ã€‚ å…¶å®ƒæ¥æºè¿˜åŒ…æ‹¬XMLå’ŒYAMLæ ¼å¼ã€‚ ä¸Šè¿°ä¸¤ä¸ªå‡½æ•°ä¸€èˆ¬ç»“åˆä½¿ç”¨ï¼šIncludeLaunchDescription(PythonLaunchDescriptionSource(â€¦))ï¼Œå…¶åº”ç”¨åœºæ™¯æœ‰ï¼š æ¨¡å—åŒ–å¯åŠ¨ï¼šåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯å°†ä¸åŒåŠŸèƒ½èŠ‚ç‚¹æ‹†åˆ†åˆ°å¤šä¸ªlaunchæ–‡ä»¶ä¸­ã€‚ä½¿ç”¨IncludeLaunchDescription()å°†è¿™äº›launchæ–‡ä»¶ç»„åˆåœ¨ä¸€èµ·ã€‚ å¤ç”¨å·²æœ‰launchæ–‡ä»¶ï¼šè‹¥æŸä¸ªlaunchæ–‡ä»¶åœ¨å¤šä¸ªåœºæ™¯ä¸­å‡éœ€è¦å¯åŠ¨ï¼Œå¯ä»¥å°†å…¶åŒ…å«åœ¨ä¸åŒçš„çˆ¶launchæ–‡ä»¶ä¸­ã€‚ ä¼ é€’å‡½æ•°ï¼šçˆ¶launchæ–‡ä»¶é€šè¿‡launch_argumentä¼ é€’ç»™å­launchæ–‡ä»¶ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Service_communication","slug":"Service-communication","permalink":"http://example.com/tags/Service-communication/"}]},{"title":"ros_C++æœåŠ¡é€šä¿¡å®ç°å°æµ·é¾Ÿå·¡é€»","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/æœåŠ¡é€šä¿¡/ros_C++æœåŠ¡é€šä¿¡å®ç°å°æµ·é¾Ÿå·¡é€»/","text":"C++æœåŠ¡é€šä¿¡å®ç°å°æµ·é¾Ÿå·¡é€»éœ€æ±‚ï¼šè®©å°æµ·é¾Ÿåœ¨æ¨¡æ‹Ÿå™¨ä¸­éšæœºæ¸¸èµ°è¿›è¡Œå·¡é€»ã€‚åˆ†æï¼š æ€ä¹ˆè®©å°æµ·é¾ŸåŠ¨æ€æ¥æ”¶ç›®æ ‡ç‚¹ï¼ŸæœåŠ¡ ç”¨ä»€ä¹ˆæ¥å£ï¼Ÿè‡ªå®šä¹‰çš„ éšæœºæ¸¸èµ°çš„å®ç°ï¼Ÿå®¢æˆ·ç«¯æ¥äº§ç”Ÿéšæœºç‚¹ï¼Œè¯·æ±‚å·¡é€»æœåŠ¡ æ•´ä½“æ¡†æ¶å›¾ï¼šå®¢æˆ·ç«¯ç”Ÿæˆç›®æ ‡ç‚¹ï¼Œè¯·æ±‚å·¡é€»â€”ï¼ˆæœåŠ¡ï¼‰â€“&gt;æœåŠ¡ç«¯è§„åˆ’è·¯çº¿ï¼Œé©¾é©¶å°æµ·é¾Ÿåˆ°è¾¾ç›®æ ‡ç‚¹â€”ï¼ˆè¯é¢˜ï¼‰â€“&gt;å°æµ·é¾Ÿã€æ³¨ã€‘ï¼šä¸€èˆ¬ç¼–å†™ç¨‹åºï¼Œå¯ä»¥å…ˆæŠŠæœåŠ¡ç«¯ç¨‹åºå®Œæˆã€‚ æ³¨æ„ï¼š è‡ªå®šä¹‰çš„æ¥å£ä¸ŠåŠéƒ¨åˆ†è¯·æ±‚æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯ï¼›ä¸‹åŠéƒ¨åˆ†å“åº”æ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„ã€‚ srvæ¥å£æ–‡ä»¶å¯¹äºæœªèµ‹å€¼å˜é‡è¦æ±‚å°å†™ï¼Œå·²èµ‹å€¼å˜é‡è¦æ±‚å¤§å†™ã€‚ã€å¤§æ¦‚ç‡æ˜¯è¿™æ ·çš„äº†ã€‘ åˆ›å»ºæœåŠ¡æ—¶ä¼ å…¥çš„å›è°ƒå‡½æ•°ä¸€èˆ¬ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚å…¶ä¸­lambdaè¡¨è¾¾å¼ä¼ å…¥å‚æ•°æœ‰ä¸¤è¯·æ±‚å’Œå“åº”ä¸¤éƒ¨åˆ†ï¼Œ è¯·æ±‚å¯ä»¥è®¾ç½®ä¸ºconstå¸¸é‡ï¼Œè€Œå“åº”ä¸€èˆ¬è¿˜éœ€è¦è¿›è¡Œåç»­ä¿®æ”¹æ•…ä¸è®¾ç½®æˆâ€constâ€ã€‚ pythonä¸­çš„å›è°ƒå‡½æ•°éœ€è¦æœ‰è¿”å›å€¼ï¼Œå› ä¸ºpythonä¸­ä¼ å…¥çš„å€¼æ˜¯é€šè¿‡æ‹·è´å®ç°çš„ï¼›è€Œc++ä¸­çš„å›è°ƒå‡½æ•°ä¸éœ€è¦è¿”å›å€¼ï¼Œå› ä¸ºc++ä¸­ä¼ å…¥çš„æ˜¯æŒ‡é’ˆã€‚ 1.è‡ªå®šä¹‰æœåŠ¡æ¥å£æ–‡ä»¶ï¼š 123456float32 target_xfloat32 target_y---int8 SUCCESS = 1int8 FAIL = 0int8 result # ç»“æœåœ¨SUCCESSå’ŒFAILä¸­å–å…¶ä¸€ srvæ–‡ä»¶çš„ä¸ŠåŠéƒ¨åˆ†ä¸ºè¯·æ±‚å‚æ•°ï¼Œä¸‹åŠéƒ¨åˆ†ä¸ºå“åº”(è¿”å›)å‚æ•°ã€‚ 2.å®¢æˆ·ç«¯å®ç°æ­¥éª¤ï¼š åˆ›å»ºå®¢æˆ·ç«¯å’Œå®šæ—¶å™¨; å®šæ—¶äº§ç”Ÿç›®æ ‡ç‚¹å¹¶è¯·æ±‚æœåŠ¡ç«¯å·¡é€»ã€‚ å®ç°ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;chapt4_interfaces/srv/patrol.hpp&quot;#include &lt;chrono&gt;#include &lt;ctime&gt;// å°†ç±»é‡å‘½åusing Patrol = chapt4_interfaces::srv::Patrol;using namespace std::chrono_literals; // ä½¿ç”¨å‘½åç©ºé—´std::chrono_literals[å¯ä»¥ä½¿ç”¨10s,100msæ¥è¡¨ç¤ºæ—¶é—´]class TurtleClient: public rclcpp::Node&#123;private: // å£°æ˜å®šæ—¶å™¨ rclcpp::TimerBase::SharedPtr timer_; // å£°æ˜å®¢æˆ·ç«¯ rclcpp::Client&lt;Patrol&gt;::SharedPtr turtle_client; public: TurtleClient():Node(&quot;turtle_client&quot;)&#123; srand(time(NULL)); // åˆå§‹åŒ–éšæœºç§å­ // åˆ›å»ºå®¢æˆ·ç«¯ turtle_client = this-&gt;create_client&lt;Patrol&gt;(&quot;Patrol&quot;); // åˆ›å»ºå®šæ—¶å™¨ timer_ = this-&gt;create_wall_timer(10s, [&amp;]()-&gt;void&#123; // 1.æ£€æµ‹æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while(!this-&gt;turtle_client-&gt;wait_for_service(1s))&#123; // æœåŠ¡ç«¯æ²¡æœ‰ä¸Šçº¿ if(!rclcpp::ok())&#123; // rclcppæ²¡æœ‰å‡†å¤‡å¥½ RCLCPP_ERROR(this-&gt;get_logger(),&quot;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­,rclcppæŒ‚äº†&quot;); &#125; RCLCPP_INFO(this-&gt;get_logger(),&quot;ç­‰å¾…æœåŠ¡ä¸Šçº¿ä¸­&quot;); &#125; // 2.æ„é€ è¯·æ±‚å¯¹è±¡ auto request = std::make_shared&lt;Patrol::Request&gt;(); request-&gt;target_x = rand()%15; request-&gt;target_y = rand()%15; // 3.å‘é€è¯·æ±‚ // å‘é€å¼‚æ­¥è¯·æ±‚[è¯·æ±‚ å›è°ƒå‡½æ•°] this -&gt; turtle_client -&gt; async_send_request(request, [&amp;](rclcpp::Client&lt;Patrol&gt;::SharedFuture result_future)-&gt;void&#123; auto response = result_future.get(); if(response-&gt;result==Patrol::Response::SUCCESS)&#123; RCLCPP_INFO(this-&gt;get_logger(),&quot;è¯·æ±‚æˆåŠŸï¼&quot;); &#125;if(response-&gt;result==Patrol::Response::FAIL)&#123; RCLCPP_INFO(this-&gt;get_logger(),&quot;è¯·æ±‚å¤±è´¥ï¼&quot;); &#125; &#125;); &#125;); &#125;&#125;;int main(int argc,char* argv[])&#123; rclcpp::init(argc, argv); auto node = std::make_shared&lt;TurtleClient&gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0;&#125; 3.æœåŠ¡ç«¯å®ç°æ­¥éª¤ï¼š å®šä¹‰åŸºäºPatrolç±»çš„æœåŠ¡å…±äº«æŒ‡é’ˆã€å‘å¸ƒè€…çš„å…±äº«æŒ‡é’ˆã€è®¢é˜…è€…çš„å…±äº«æŒ‡é’ˆï¼› è·å–å½“å‰ä½ç½®ï¼Œå¹¶è®¡ç®—æ–°ä½ç½®å‘å¸ƒå‡ºå»ã€‚ ä»£ç å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;geometry_msgs/msg/twist.hpp&quot;#include &quot;turtlesim/msg/pose.hpp&quot;#include &quot;chapt4_interfaces/srv/patrol.hpp&quot;/*æœåŠ¡ç«¯ç¼–å†™ï¼šä½¿å°æµ·é¾Ÿåˆ°è¾¾å…·ä½“ç‚¹*/// å°†ç±»é‡å‘½åusing Patrol = chapt4_interfaces::srv::Patrol;class TurtleControlNode: public rclcpp::Node&#123;private: rclcpp::Service&lt;Patrol&gt;::SharedPtr patrol_service; // å®šä¹‰åŸºäºPatrolç±»çš„æœåŠ¡å…±äº«æŒ‡é’ˆ rclcpp::Publisher&lt;geometry_msgs::msg::Twist&gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½å…±äº«æŒ‡é’ˆ rclcpp::Subscription&lt;turtlesim::msg::Pose&gt;::SharedPtr subscriber_; //è®¢é˜…è€…çš„æ™ºèƒ½å…±äº«æŒ‡é’ˆ double target_x_&#123;1.0&#125;; double target_y_&#123;1.0&#125;; double k_&#123;1.0&#125;; //æ¯”ä¾‹ç³»æ•°ã€é—´æ¥æ§åˆ¶é€Ÿåº¦ã€‘ double max_speed_&#123;3.0&#125;; //æœ€å¤§é€Ÿåº¦public: explicit TurtleControlNode(const std::string&amp; node_name):Node(node_name) &#123; publisher_ = this-&gt;create_publisher&lt;geometry_msgs::msg::Twist&gt;(&quot;/turtle1/cmd_vel&quot;,10); subscriber_ = this-&gt;create_subscription&lt;turtlesim::msg::Pose&gt;(&quot;/turtle1/pose&quot;,10,std::bind(&amp;TurtleControlNode::on_pose_received,this, std::placeholders::_1)); // æœåŠ¡æ™ºèƒ½æŒ‡é’ˆçš„æ„é€ [æœåŠ¡åï¼Œå›è°ƒå‡½æ•°(ç”¨lambdaè¡¨è¾¾å¼å®ç°)] patrol_service = this-&gt;create_service&lt;Patrol&gt;(&quot;Patrol&quot;,[&amp;](const Patrol::Request::SharedPtr request, Patrol::Response::SharedPtr response)-&gt;void&#123; // è¿›è¡Œè¯·æ±‚å€¼åˆæ³•æ€§åˆ¤æ–­ if((0 &lt; request-&gt;target_x &amp;&amp; request-&gt;target_x &lt; 12.0)&amp;&amp;(0 &lt; request-&gt;target_y &amp;&amp; request-&gt;target_y &lt; 12.0))&#123; target_x_ = request-&gt;target_x; target_y_ = request-&gt;target_y; response-&gt;result = Patrol::Response::SUCCESS; &#125;else&#123; response-&gt;result = Patrol::Response::FAIL; &#125; &#125;); // ä½œä¸ºæœåŠ¡çš„å‚æ•°æœ‰ä¸¤è¯·æ±‚å’Œå“åº”ä¸¤éƒ¨åˆ† &#125; // è·å–å½“å‰ä½ç½®ï¼Œå¹¶è®¡ç®—æ–°ä½ç½®å‘å¸ƒå‡ºå» void on_pose_received(const turtlesim::msg::Pose::SharedPtr pose)&#123; //å‚æ•°ï¼šæ”¶åˆ°æ•°æ®çš„å…±äº«æŒ‡é’ˆ // 1.è·å–å½“å‰ä½ç½® auto current_x = pose-&gt;x; auto current_y = pose-&gt;y; RCLCPP_INFO(get_logger(),&quot;è·å–å½“å‰ä½ç½®:x=%f,y=%f&quot;,current_x,current_y); // 2.è®¡ç®—å½“å‰æµ·é¾Ÿä½ç½®è·Ÿç›®æ ‡ä½ç½®ä¹‹é—´çš„è·ç¦»å·®å’Œè§’åº¦å·®ã€‚ auto distance = std::sqrt((target_x_-current_x)*(target_x_-current_x)+(target_y_-current_y)*(target_y_-current_y)); // ç›®æ ‡è§’åº¦å’Œå½“å‰è§’åº¦çš„å·®å€¼ auto angle = std::atan2((target_y_-current_y),(target_x_-current_x))- pose-&gt;theta; // 3.æ§åˆ¶ç­–ç•¥ auto msg = geometry_msgs::msg::Twist(); if(distance&gt;0.1)&#123; if(fabs(angle)&gt;0.2)&#123; msg.angular.z = fabs(angle); //å¦‚æœè§’åº¦å·®å¤§äº0.2åˆ™æ”¹å˜è§’åº¦(è¿›è¡Œæ—‹è½¬) &#125;else&#123; msg.linear.x = k_*distance; //å¦‚æœè§’åº¦å·®ä¸å¤§ï¼Œåˆ™æé«˜é€Ÿåº¦ &#125; &#125; //é™åˆ¶æœ€å¤§çº¿é€Ÿåº¦ if(msg.linear.x &gt; max_speed_)&#123; msg.linear.x = max_speed_; &#125; publisher_-&gt;publish(msg); &#125;&#125;;int main(int argc,char* argv[])&#123; rclcpp::init(argc, argv); auto node = std::make_shared&lt;TurtleControlNode&gt;(&quot;turtle_control&quot;); rclcpp::spin(node); rclcpp::shutdown(); return 0;&#125; è¿™é‡Œè¿˜æ˜¯éœ€è¦å›é¡¾ä¸€ä¸‹å‘å¸ƒè€…ï¼ˆæœåŠ¡ç«¯ï¼‰ã€è®¢é˜…è€…ï¼ˆå®¢æˆ·ç«¯ï¼‰å’ŒæœåŠ¡çš„åˆ›å»ºï¼ˆå£°æ˜å°±ä¸è®²äº†ï¼‰ã€‚ å‘å¸ƒè€…çš„åˆ›å»ºï¼š create_publisher&lt;æ¨¡æ¿ç±»&gt;(): å‚æ•°åˆ—è¡¨ï¼šæœåŠ¡åç§°ã€qosï¼› è¿”å›å€¼ï¼šå‘å¸ƒè€…å®ä¾‹ã€‚ è®¢é˜…è€…çš„åˆ›å»ºï¼š create_subscription&lt;æ¨¡æ¿ç±»&gt;(): å‚æ•°åˆ—è¡¨ï¼šæœåŠ¡åç§°ï¼ˆè¿™é‡Œåº”è¯¥ä¸å¯¹åº”å‘å¸ƒè€…ä¸­çš„æœåŠ¡åç§°å¯¹åº”ï¼‰ã€qosã€å›è°ƒå‡½æ•°ã€‚ è¿”å›å€¼ï¼šè®¢é˜…è€…å®ä¾‹ã€‚ æœåŠ¡çš„åˆ›å»ºï¼š create_service&lt;æ¨¡æ¿ç±»&gt;(): å‚æ•°åˆ—è¡¨ï¼šæœåŠ¡åç§°ã€å›è°ƒå‡½æ•°ã€‚ è¿”å›å€¼ï¼šæœåŠ¡å®ä¾‹ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Service_communication","slug":"Service-communication","permalink":"http://example.com/tags/Service-communication/"}]},{"title":"ros_æœåŠ¡é€šä¿¡å®è®­_äººè„¸è¯†åˆ«","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/æœåŠ¡é€šä¿¡/ros_æœåŠ¡é€šä¿¡å®è®­_äººè„¸è¯†åˆ«/","text":"æœåŠ¡é€šä¿¡å®è®­_äººè„¸è¯†åˆ«éœ€æ±‚ï¼šä½¿ç”¨pythonå®ç°ï¼Œåˆ›å»ºä¸€ä¸ªäººè„¸æ£€æµ‹æœåŠ¡ï¼Œæä¾›å›¾åƒï¼Œè¿”å›äººè„¸æ•°é‡ä½ç½®ä¿¡æ¯ã€‚ éš¾ç‚¹åˆ†æï¼š äººè„¸æ€ä¹ˆè¯†åˆ«ï¼Ÿä½¿ç”¨face_recognition å›¾ç‰‡æ•°æ®å’Œç»“æœæ€ä¹ˆä¼ é€’ï¼Ÿä½¿ç”¨æœåŠ¡é€šä¿¡ æ²¡æœ‰åˆé€‚çš„æ¶ˆæ¯æ¥å£ï¼Ÿè‡ªå®šä¹‰ä¸€ä¸ª ã€åˆ†ä¸ºè¯·æ±‚å’Œå“åº”ä¸¤éƒ¨åˆ†ã€‘ 1.è‡ªå®šä¹‰æœåŠ¡æ¥å£ æ¶ˆæ¯æ¥å£æ–‡ä»¶å‘½åä¸è¦ä½¿ç”¨â€_â€ï¼Œè€Œåº”è¯¥ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼› â€œos.path.join(è·¯å¾„1,è·¯ç»2)â€œï¼šå°†ä¸¤ä¸ªè·¯å¾„æ‹¼æ¥èµ·æ¥ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Šâ€&#x2F;â€œï¼› ä½¿ç”¨â€CV BRIDGEâ€å°†opencvä¸‹å›¾ç‰‡æ ¼å¼ä¸ROSæ¶ˆæ¯æ¥å£ä¸­çš„sensor_msgs&#x2F;Imageæ–‡ä»¶äº’ç›¸è½¬åŒ–ï¼› Facedetectors.srvæ–‡ä»¶çš„ç¼–å†™ï¼š 12345678sensor_msgs/Image image---int16 numberfloat32 use_time int32[] topint32[] rightint32[] bottomint32[] left 2.æœåŠ¡å®ç°æ­¥éª¤ï¼š åˆ›å»ºæœåŠ¡ï¼Œæ¥å—è¯·æ±‚Requestï¼› è°ƒç”¨face_recognitionæ¥è¯†åˆ«äººè„¸; å¤„ç†å“åº”ç»“æœåˆæˆResponseè¿”å›ã€‚ æœåŠ¡å™¨ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import rclpyfrom rclpy.node import Nodefrom chapt4_interfaces.srv import Facedetectorimport cv2 import face_recognitionfrom ament_index_python.packages import get_package_share_directory # è·å¾—åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„import osfrom cv_bridge import CvBridgeimport time&#x27;&#x27;&#x27;äººè„¸è¯†åˆ«æœåŠ¡ç«¯&#x27;&#x27;&#x27;class FaceService(Node): def __init__(self): super().__init__(&#x27;face_service&#x27;) # åˆ›å»ºæœåŠ¡ å‚æ•°ï¼š(æœåŠ¡ç±»å‹ï¼ŒæœåŠ¡åç§°ï¼Œå›è°ƒå‡½æ•°) self.service = self.create_service(Facedetector,&#x27;face_detect&#x27;, self.detect_face_callback) self.cvbridge = CvBridge() # ä¸»è¦ç”¨äºROSå›¾åƒæ¶ˆæ¯å’Œopencvå›¾åƒä¹‹é—´è¿›è¡Œè½¬æ¢ self.declare_parameter(&#x27;upsample_flu&#x27;,3) self.declare_parameter(&#x27;model&#x27;,&#x27;hog&#x27;) self.default_path = os.path.join(get_package_share_directory(&quot;demo_python_service&quot;),&quot;resource/test/.png&quot;) self.upsample_flu = self.get_parameter(&#x27;upsample_flu&#x27;).value self.model= self.get_parameter(&#x27;model&#x27;).value self.get_logger().info(&quot;äººè„¸è¯†åˆ«ï¼å¯åŠ¨ï¼ï¼&quot;) # æœåŠ¡å™¨å¯¹ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œå¤„ç†ï¼Œä»¥ä¸‹ä¸ºé€»è¾‘å¤„ç†ä»£ç  def detect_face_callback(self, request, response): if(request.image.data): # è¯·æ±‚ä¸­æœ‰å›¾åƒæ—¶ cv_img = self.cvbridge.imgmsg_to_cv2(request.image) # å°†æ¶ˆæ¯æ¥å£æ ¼å¼çš„å›¾åƒæ–‡ä»¶è½¬åŒ–ä¸ºcv2èƒ½è¯†åˆ«çš„å›¾åƒæ–‡ä»¶ else: # è¯·æ±‚ä¸­æ²¡æœ‰å›¾åƒæ—¶ cv_img = cv2.imread(self.default_path) # æ­¤æ—¶çš„cv_imgå·²ç»æ˜¯opencvæ ¼å¼çš„å›¾åƒäº† self.get_logger().info(f&quot;é»˜è®¤å›¾åƒä½ç½®ï¼š&#123;self.default_path&#125;&quot;) self.get_logger().info(f&quot;å¹¶æœªæ‰¾åˆ°å›¾ç‰‡ï¼Œå·²ç»åŠ è½½åˆ°é»˜è®¤å›¾åƒ&quot;) start_time = time.time() # è·å¾—äººè„¸ä½ç½®(å³æ£€æµ‹äººè„¸)ï¼Œä¼ å…¥å‚æ•°(å›¾åƒï¼Œä¸Šé‡‡æ ·æ¬¡æ•°ï¼Œä½¿ç”¨æ¨¡å‹)ã€å…³äºä¸Šé‡‡æ ·ï¼Œå…¶æ¬¡æ•°è¶Šé«˜ï¼Œå›¾åƒç²¾åº¦ä¹Ÿè¶Šé«˜ã€‘ face_locations = face_recognition.face_locations(cv_img,self.upsample_flu,self.model) # ç»˜åˆ¶äººè„¸æ¡† for top,bottom,right,left in face_locations: # è¿™é‡Œçš„top,bottom,right,leftå°±æ˜¯æ¶ˆæ¯æ–‡ä»¶é‡Œå®šä¹‰çš„å››ä¸ªæ¶ˆæ¯æ¥å£ response.top.append(top) response.bottom.append(bottom) response.right.append(right) response.left.append(left) response.use_time = time.time()-start_time # æ¶ˆæ¯æ¥å£é‡Œå®šä¹‰çš„use_time response.number = len(face_locations) #è¯¶ï¼Œè¿™é‡Œface_locationsæ•°ç»„çš„é•¿åº¦å°±æ˜¯äººè„¸çš„ä¸ªæ•° return response # å› ä¸ºä¼ å…¥çš„ä¸æ˜¯æŒ‡é’ˆç±»å‹ï¼Œæ•…éœ€è¦returnä¸€ä¸‹def main(): rclpy.init() node = FaceService() rclpy.spin(node) rclpy.shutdown() 3.å®¢æˆ·ç«¯å®ç°æ­¥éª¤ï¼š åˆ›å»ºå®¢æˆ·ç«¯ï¼› æ„é€ Request,å‘é€è¯·æ±‚ï¼› å¤„ç†è¿”å›çš„Response,ç»˜åˆ¶äººè„¸æ˜¾ç¤ºã€‚ å®¢æˆ·ç«¯ä»£ç å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import rclpyfrom rclpy.node import Nodefrom chapt4_interfaces.srv import Facedetectorimport cv2 import face_recognitionfrom ament_index_python.packages import get_package_share_directory # è·å¾—åŠŸèƒ½åŒ…shareç›®å½•ç»å¯¹è·¯å¾„import osfrom cv_bridge import CvBridgeimport timeclass FaceClient(Node): def __init__(self): super().__init__(&#x27;face_client&#x27;) # åˆ›å»ºæœåŠ¡ å‚æ•°ï¼š(æ¶ˆæ¯æ¥å£ï¼ŒæœåŠ¡åç§°ï¼Œå›è°ƒå‡½æ•°) # self.service = self.create_service(Facedetector,&#x27;face_detect&#x27;, self.detect_face_callback) self.cvbridge = CvBridge() self.default_path = os.path.join(get_package_share_directory(&quot;demo_python_service&quot;),&quot;resource/test2.png&quot;) self.get_logger().info(&quot;äººè„¸è¯†åˆ«å®¢æˆ·ç«¯ï¼å¯åŠ¨ï¼ï¼&quot;) # åˆ›å»ºå®¢æˆ·ç«¯ å‚æ•°ï¼š(æœåŠ¡ç±»å‹ï¼ŒæœåŠ¡åç§°ï¼Œå›è°ƒå‡½æ•°)ï¼Œæ³¨æ„è¿™é‡Œä¼ å…¥çš„æœåŠ¡åç§°å¿…é¡»è¦ä¸æœåŠ¡ç«¯ä¸€è‡´ self.face_client = self.create_client(Facedetector,&#x27;face_detect&#x27;) self.image = cv2.imread(self.default_path) # å‘é€è¯·æ±‚ def send_request(self): # 1.åˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦ä¸Šçº¿ while self.face_client.wait_for_service(timeout_sec=0.1) is False: # æ¯éš”0.1så°±è¯·æ±‚ä¸€ä¸‹æœåŠ¡ç«¯ self.get_logger().info(&quot;æœåŠ¡ç«¯è¿˜æœªä¸Šçº¿ï¼Œè¯·ç­‰å¾…ï¼&quot;) # 2.æ„é€ request request = Facedetector.Request() request.image = self.cvbridge.cv2_to_imgmsg(self.image) # å°†opencvæ ¼å¼å›¾åƒè½¬åŒ–ä¸ºæ¶ˆæ¯æ¥å£å¯æ¥å—çš„å›¾åƒæ ¼å¼ # 3.å‘é€è¯·æ±‚å¹¶ç­‰å¾…å®Œæˆ future = self.face_client.call_async(request) #(å¼‚æ­¥è·å–ç»“æœ)ç°åœ¨çš„futureä¸­ä¸åŒ…å«å“åº”ç»“æœï¼Œéœ€è¦ç­‰å¾…æœåŠ¡ç«¯å¤„ç†å®Œæˆæ‰ä¼šæŠŠç»“æœæ”¾åˆ°futureä¸­ # while not future.done(): # time.sleep(1.0) # ä¼‘çœ å½“å‰è¿›ç¨‹ï¼Œç­‰å¾…æœåŠ¡å¤„ç†å®Œæˆ.ä¼šé€ æˆå½“å‰çº¿ç¨‹æ— æ³•å†æ¥æ”¶æœåŠ¡ç«¯çš„è¿”å›ï¼Œè¿™æ ·æ°¸è¿œä¹Ÿä¸ä¼šå¾—åˆ°future.done()--&gt;True # selfå¯ä»¥ç›¸å½“äºè‡ªå®šä¹‰ç±»çš„ä¸€ä¸ªå¯¹è±¡ # rclpy.spin_until_future_complete(self,future) # ä¸€è¾¹æŸ¥çœ‹futureæ˜¯å¦å®Œæˆï¼Œä¸€è¾¹æ¥æ”¶ç»“æœã€ç­‰å¾…æœåŠ¡ç«¯è¿”å›å“åº”ã€‘ # ä½¿ç”¨å›è°ƒå‡½æ•°ä»£æ›¿ä¸Šé¢çš„æ–¹æ³• def result_callback(result_future): response = result_future.result() # è·å–å“åº” self.get_logger().info(f&quot;å·²ç»æ”¶åˆ°å“åº”ï¼Œå…±æ”¶åˆ°&#123;response.number&#125;å¼ äººè„¸ï¼Œè€—æ—¶&#123;response.use_time&#125;ç§’&quot;) self.show_response(response) future.add_done_callback(result_callback) # æ˜¾ç¤ºæœåŠ¡ç«¯çš„å“åº”ç»“æœ def show_response(self, response): # ç»˜åˆ¶äººè„¸ for i in range(response.number): top = response.top[i] right= response.right[i] bottom = response.bottom[i] left = response.left[i] cv2.rectangle(self.image,(left,top),(right,bottom),(255,0,0),5) # æ˜¾ç¤ºå›¾ç‰‡ cv2.imshow(&#x27;face_result&#x27;,self.image) cv2.waitKey(0) # ä¹Ÿæ˜¯ä¼šé˜»å¡spinçš„ï¼Œä½¿å…¶æ— æ³•æ­£å¸¸è¿è¡Œdef main(): rclpy.init() node = FaceClient() node.send_request() rclpy.spin(node) rclpy.shutdown() [æ³¨æ„]ï¼š â€‹ 1.pythonä¸­ä¸ä½¿ç”¨â€!â€å–åï¼Œè€Œç›´æ¥ä½¿ç”¨â€is Falseâ€orâ€notâ€ã€‚â€‹ 2.å‘é€è¯·æ±‚å¹¶ç­‰å¾…ç»“æœçš„è¿‡ç¨‹å¤„ç†ï¼Œä¸è¦ä½¿ç”¨whileè¿›è¡Œç®€å•å¤„ç†ï¼Œæœ€å¥½ä½¿ç”¨rclpy.spin_until_future_complete(å‚æ•°) # ä¸€è¾¹æŸ¥çœ‹futureæ˜¯å¦å®Œæˆï¼Œä¸€è¾¹æ¥æ”¶ç»“æœã€‚â€‹ å…¶ä¸­å‚æ•°ä¸ºè°ƒç”¨call_async()è¿”å›çš„ç»“æœã€‚â€‹ 3.å¯¹äºè§£å†³å®¢æˆ·ç«¯å‘é€è¯·æ±‚å“åº”æ›´å¥½çš„è§£å†³åŠæ³•ï¼Œå¯ä»¥é‡‡ç”¨å›è°ƒå‡½æ•°ï¼ˆå…·ä½“è§face_client.pyï¼‰â€‹ å³è®©call_async()è¿”å›çš„ç»“æœè°ƒç”¨add_done_callback()ï¼Œé‡Œé¢æ”¾å…¥å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°è´Ÿè´£è·å–å“åº”å’Œæ˜¾ç¤ºå“åº”ã€‚ ä¸€äº›å…³äºåœ¨pythonçš„åŒæ­¥ä»£ç ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼š å½“éœ€è¦åœ¨åŒæ­¥å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€asyncio.get_event_loop()â€ï¼šæ¥è·å–å½“å‰æ—¶é—´çš„å¾ªç¯ï¼› â€œasyncio.run_coroutine_threadsafe(å¼‚æ­¥å‡½æ•°ï¼Œå½“å‰æ—¶é—´å¾ªç¯)â€ï¼šå°†å¼‚æ­¥å‡½æ•°åŒ…è£…æˆä¸€ä¸ªå¯è°ƒç”¨çš„çº¿ç¨‹å®‰å…¨çš„åç¨‹å¯¹è±¡ï¼› â€œresult()â€ï¼šè·å–å¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼ã€‚ ç¤ºä¾‹ä»£ç ï¼š 1234567891011import asyncio# å¼‚æ­¥å‡½æ•°async def async_function(): await asyncio.sleep(1) # æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ return &quot;hello ros2&quot;#åŒæ­¥å‡½æ•°def sync_function(): loop = asyncio.get_event_loop() # è·å–å½“å‰æ—¶é—´å¾ªç¯ future = asyncio.run_coroutine_threadsafe(async_function,loop) # å°†å¼‚æ­¥å‡½æ•°åŒ…è£…æˆä¸€ä¸ªå¯è°ƒç”¨çš„åç¨‹å¯¹è±¡ result = future.result() ä½†åœ¨å¤„ç†å¼‚æ­¥å‡½æ•°æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¼‚å¸¸æƒ…å†µã€‚ä»¥ä¸‹æ˜¯åº”å¯¹æªæ–½ï¼š å¸¸åœ¨â€asyncio.run_coroutine_threadsafe()â€çš„è¿”å›å€¼ä¸Šè°ƒç”¨â€add_done_callback(å›è°ƒå‡½æ•°)â€ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šåœ¨å¼‚æ­¥å‡½æ•°å¤„ç†å®Œåè¢«è°ƒç”¨ï¼Œå¯ä»¥åœ¨é‡Œé¢å¤„ç†å¼‚å¸¸ã€‚ 1234567891011121314151617import asyncio# å¼‚æ­¥å‡½æ•°async def async_function(): await asyncio.sleep(1) # æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ return &quot;hello ros2&quot;#åŒæ­¥å‡½æ•°def sync_function(): loop = asyncio.get_event_loop() # è·å–å½“å‰æ—¶é—´å¾ªç¯ future = asyncio.run_coroutine_threadsafe(async_function,loop) # å°†å¼‚æ­¥å‡½æ•°åŒ…è£…æˆä¸€ä¸ªå¯è°ƒç”¨çš„åç¨‹å¯¹è±¡ def callback(f): try: result = f.result() except Exception as e: print(f&quot;An Exception error:&#123;e&#125;&quot;) future.add_done_callback(callback) [è¡¥å……]ï¼š å…³äºpythonä¸­çš„å¼‚å¸¸æ•è·ï¼Œå¸¸ç”¨å¦‚ä¸‹ç»“æ„ï¼š try: â€‹ â€¦ except Exception as e: â€‹ â€¦ å…³äºC++ä¸­çš„å¼‚å¸¸æ•è·ï¼Œå¸¸ç”¨å¦‚ä¸‹ç»“æ„ï¼š try{ â€‹ â€¦ }catch(Exception e){ â€‹ â€¦ } pythonè¯­è¨€ç¼–å†™é¡¹ç›®æ—¶ï¼Œresourceä¸‹çš„æ–‡ä»¶ä¸ä¼šç”±â€colcon buildâ€æ‹·è´åˆ°installä¸‹çš„shareç›®å½•ä¸­ï¼Œéœ€è¦åœ¨setup.pyæ–‡ä»¶çš„data_filesä¸­æ·»åŠ ã€‚æ·»åŠ è¯­å¥ï¼š**(â€œshare&#x2F;â€œ + package_name+â€&#x2F;resourceâ€,[â€œæ–‡ä»¶åâ€])**ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Service_communication","slug":"Service-communication","permalink":"http://example.com/tags/Service-communication/"}]},{"title":"ros_TFå…³ç³»çš„æŸ¥è¯¢","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/å·¥å…·/ros_TFå…³ç³»çš„æŸ¥è¯¢/","text":"ros_TFå…³ç³»çš„æŸ¥è¯¢1.åŸç†ï¼šè®¢é˜…è¯é¢˜&#x2F;tf &#x2F;tf_static æ”¶é›†æ‰€æœ‰åæ ‡ç³»å…³ç³»ï¼Œè¿›è¡Œè®¡ç®—ã€‚ 2.æ ¸å¿ƒä»£ç ï¼š self.buffer_ &#x3D; Buffer() self.listener_ &#x3D; TransformListener(self.buffer_,self) self.timer_ &#x3D; self.create_timer(1,self.get_transform) [æ³¨]ï¼šå…¶ä¸­self.get_transformæ˜¯è‡ªå®šä¹‰çš„ç”¨äºå®æ—¶æŸ¥è¯¢åæ ‡å…³ç³»çš„å‡½æ•°ï¼ˆå› ä¸ºå¯èƒ½ä¼šæŸ¥è¯¢å¤±è´¥ï¼Œæ•…ä½¿ç”¨tryâ€¦exceptï¼‰ã€‚ 3.ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;geometry_msgs/msg/transform_stamped.hpp&quot; // æ¶ˆæ¯æ¥å£#include &quot;tf2/LinearMath/Quaternion.hpp&quot; // æä¾›Quaternionç±»#include &quot;tf2_geometry_msgs/tf2_geometry_msgs.hpp&quot; // æ¶ˆæ¯ç±»å‹è½¬æ¢å‡½æ•°#include &quot;tf2_ros/transform_listener.h&quot; //åæ ‡ç›‘å¬ç±»#include &lt;chrono&gt;#include &quot;tf2_ros/buffer.h&quot; // æä¾›buffer#include &quot;tf2/utils.h&quot; //æä¾›å››å…ƒæ•°è½¬æ¬§æ‹‰è§’çš„å‡½æ•° // mapåˆ°base_linkä¹‹é—´çš„åæ ‡å…³ç³»using namespace std::chrono_literals;using dynamic_tf = tf2_ros::TransformListener;using bf = tf2_ros::Buffer;class DynamicTfListener : public rclcpp::Node&#123;private: std::shared_ptr&lt;dynamic_tf&gt; listener_; // å£°æ˜ä¸€ä¸ªå¹¿æ’­å™¨ç±»çš„å…±äº«æŒ‡é’ˆ rclcpp::TimerBase::SharedPtr timer_; std::shared_ptr&lt;bf&gt; buffer_;public: DynamicTfListener() : Node(&quot;listener_node&quot;)&#123; // å®šæ—¶è·å–åæ ‡å˜æ¢ this-&gt;timer_ = this-&gt;create_wall_timer(1s,std::bind(&amp;DynamicTfListener::get_transform,this)); this-&gt;buffer_ = std::make_shared&lt;bf&gt;(this-&gt;get_clock()); this-&gt;listener_= std::make_shared&lt;dynamic_tf&gt;(*buffer_, this); // åœ¨dynamic_tfé‡Œé¢åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…æ¥å‘å¸ƒtf_staticçš„è¯é¢˜ &#125; void get_transform()&#123; // åˆ°buffer_é‡ŒæŸ¥è¯¢åæ ‡å…³ç³» try&#123; // æŸ¥è¯¢åæ ‡å…³ç³»[ä»&quot;target_point&quot;åˆ°&quot;base_link&quot;] const auto result = buffer_-&gt;lookupTransform(&quot;base_link&quot;,&quot;target_point&quot;, this-&gt;get_clock()-&gt;now(),rclcpp::Duration::from_seconds(2.0f)); // è·å–æŸ¥è¯¢ç»“æœ auto transform = result.transform.translation; auto rotation = result.transform.rotation; // è¿™ä¸ªrotationæ˜¯å››å…ƒæ•°æ ¼å¼ double y, p, r; tf2::getEulerYPR(rotation, y, p, r); RCLCPP_INFO(get_logger(),&quot;å¹³ç§»:%f,%f,%f&quot;,transform.x, transform.y, transform.z); RCLCPP_INFO(get_logger(),&quot;æ—‹è½¬:y:%f,p:%f,r:%f&quot;, y, p, r); &#125; catch(const std::exception&amp; e)&#123; RCLCPP_WARN(get_logger(),&quot;%s&quot;,e.what()); &#125; &#125;&#125;;int main(int argc, char* argv[])&#123; rclcpp::init(argc,argv); auto stb = std::make_shared&lt;DynamicTfListener&gt;(); rclcpp::spin(stb); rclcpp::shutdown();&#125;","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"tools","slug":"tools","permalink":"http://example.com/tags/tools/"}]},{"title":"ros_gitè¿›é˜¶","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/å·¥å…·/ros_gitè¿›é˜¶/","text":"ros_gitè¿›é˜¶ â€œgit statusâ€:å¯ä»¥æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶åã€‚ â€œgit diffâ€ or â€œgit diff æ–‡ä»¶åâ€:å¯ä»¥æŸ¥çœ‹å…·ä½“ä¿®æ”¹å†…å®¹ã€‚ è¿˜å¯ä»¥åœ¨vscodeä¸­çš„â€æºä»£ç ç®¡ç†â€ä¸‹å¯è§†åŒ–æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶å’Œå†…å®¹ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"tools","slug":"tools","permalink":"http://example.com/tags/tools/"}]},{"title":"ros_åŠ¨æ€TFçš„å‘å¸ƒ","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/å·¥å…·/ros_åŠ¨æ€TFçš„å‘å¸ƒ/","text":"åŠ¨æ€TFçš„å‘å¸ƒåŸç†ï¼šä¸åœå‘å¸ƒ &#x2F;tf è¯é¢˜ ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;geometry_msgs/msg/transform_stamped.hpp&quot; // æ¶ˆæ¯æ¥å£#include &quot;tf2/LinearMath/Quaternion.hpp&quot; // æä¾›Quaternionç±»#include &quot;tf2_geometry_msgs/tf2_geometry_msgs.hpp&quot; // æ¶ˆæ¯ç±»å‹è½¬æ¢å‡½æ•°#include &quot;tf2_ros/transform_broadcaster.h&quot; //åæ ‡å¹¿æ’­å™¨#include &lt;chrono&gt;// mapåˆ°base_linkä¹‹é—´çš„åæ ‡å…³ç³»using namespace std::chrono_literals;using dynamic_tf = tf2_ros::TransformBroadcaster;class DynamicTfBc : public rclcpp::Node&#123;private: std::shared_ptr&lt;dynamic_tf&gt; broadcaster_; // å£°æ˜ä¸€ä¸ªå¹¿æ’­å™¨ç±»çš„å…±äº«æŒ‡é’ˆ rclcpp::TimerBase::SharedPtr timer_;public: DynamicTfBc() : Node(&quot;dynamic_node&quot;)&#123; // ??????è¿™é‡Œä¸ºå•¥ä¸€ä¸ªæœ‰this-&gt; ,ä¸€ä¸ªæ²¡æœ‰this-&gt;ï¼ˆå“¦å“¦ï¼Œæ˜¯å› ä¸ºcreate_wall_timeræ˜¯åœ¨rclcpp::NodeèŠ‚ç‚¹é‡Œçš„ï¼Œè€Œæˆ‘ä»¬åˆ›å»ºçš„ç±»åˆšå¥½ç»§æ‰¿äº†Nodeï¼‰ this-&gt;broadcaster_ = std::make_shared&lt;dynamic_tf&gt;(this); // åœ¨dynamic_tfé‡Œé¢åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…æ¥å‘å¸ƒtf_staticçš„è¯é¢˜ // this-&gt;publish_tf(); //é™æ€å‘å¸ƒï¼Œåªèƒ½å‘å¸ƒä¸€æ¬¡ //å‚æ•°ï¼š (ç±»æ¨¡æ¿ï¼Œå¯¹è±¡æŒ‡é’ˆ) this-&gt;timer_ = this-&gt;create_wall_timer(100ms,std::bind(&amp;DynamicTfBc::publish_tf,this)); &#125; void publish_tf()&#123; // åˆ›å»ºæ¶ˆæ¯æ¥å£ geometry_msgs::msg::TransformStamped tf; tf.header.stamp = this-&gt;get_clock()-&gt;now(); tf.header.frame_id = &quot;map&quot;; tf.child_frame_id = &quot;base_link&quot;; // ç»™å¹³ç§»éƒ¨åˆ†èµ‹å€¼ tf.transform.translation.x = 2.0; tf.transform.translation.y = 3.0; tf.transform.translation.z = 0.0; // å®šä¹‰ä¸€ä¸ªå››å…ƒæ•°ç±» tf2::Quaternion q; // æŠŠå·²çŸ¥æ¬§æ‹‰è§’åº¦è½¬æˆå››å…ƒæ•° q.setRPY(0.0, 0.0, 30*M_PI/180); // ç»™æ—‹è½¬éƒ¨åˆ†èµ‹å€¼ tf.transform.rotation = tf2::toMsg(q); // æŠŠæ¶ˆæ¯å‘å¸ƒå‡ºå» this-&gt;broadcaster_-&gt;sendTransform(tf); &#125;&#125;;int main(int argc, char* argv[])&#123; rclcpp::init(argc,argv); auto stb = std::make_shared&lt;DynamicTfBc&gt;(); rclcpp::spin(stb); rclcpp::shutdown();&#125; ä¸åŒäºé™æ€åæ ‡åªç”¨å‘å¸ƒä¸€æ¬¡ï¼ŒåŠ¨æ€åæ ‡éœ€è¦ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¸æ–­çš„å‘é€åæ ‡ã€‚ é™æ€å’ŒåŠ¨æ€åæ ‡çš„å‘å¸ƒï¼Œæ ¸å¿ƒé€»è¾‘éƒ½æ˜¯å…ˆåˆ›å»ºæ¶ˆæ¯æ¥å£ï¼Œå†å¡«å……æ¶ˆæ¯æ¥å£ï¼Œæœ€åæŠŠæ¶ˆæ¯å‘å¸ƒå‡ºå»ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"tools","slug":"tools","permalink":"http://example.com/tags/tools/"}]},{"title":"ros_TFç›¸å…³å‘½ä»¤åŠåŸç†æ¢ç©¶","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/å·¥å…·/ros_TFç›¸å…³å‘½ä»¤åŠåŸç†æ¢ç©¶/","text":"ros_TFç›¸å…³å‘½ä»¤åŠåŸç†æ¢ç©¶ä»¥ä¸‹å‡æ˜¯ç»ˆç«¯å†…è¾“å…¥çš„å‘½ä»¤ 1.TFå·¥å…·çš„ç®€å•ä»‹ç» é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨TFï¼šï¼ˆe.gï¼‰ å‘å¸ƒbase_linkåˆ°base_laserä¹‹é—´çš„å˜æ¢:ros2 run tf2_ros static_transform_publisher â€“x å€¼ â€“y å€¼ -z å€¼ â€“roll å€¼ â€“pitch å€¼ â€“yaw å€¼ â€“frame-id idå€¼ â€“child-frame-id idå€¼ã€‚ â€‹ **[æ³¨]**ï¼šroll:ç¿»æ»š pitch:ä¿¯ä»° yaw:åèˆª å‘å¸ƒbase_laseråˆ°wall_pointä¹‹é—´çš„å˜æ¢:ros2 run2 tf2_ros static_transform_publisher â€“x å€¼ â€“y å€¼ -z å€¼â€“roll å€¼ â€“pitch å€¼ â€“yaw å€¼ â€“frame-id idå€¼ â€“child-frame-id idå€¼ã€‚ æŸ¥è¯¢base_linkåˆ°wall_pointä¹‹é—´çš„å…³ç³»ï¼šros2 run tf2_ros tf2_echo idå€¼1 idå€¼2ã€‚ â€œ3d-rotation-converterâ€ï¼šå¯ä»¥å¯¹åæ ‡å˜åŒ–è¿‡ç¨‹è¿›è¡Œå¯è§†åŒ–ã€‚ â€œros2 run tf2_tools view_framesâ€:æŸ¥çœ‹TFæ ‘ã€‚ 2. TFåŸç†æ¢ç©¶ ros2 topic list -tï¼šæŸ¥è¯¢è¯é¢˜åŠå…¶å¯¹åº”æ¥å£ã€‚ ros2 interface show æ¥å£ï¼šæ¥å£è¯¦ç»†å¡«å……å±•ç¤ºã€‚ static_transform_publisheré€‚åˆäºæŸ¥è¯¢é›·è¾¾è¿™ç§å›ºå®šç‰©ä»¶ç›¸è¾ƒäºæœºå™¨äººçš„ä½ç½®å…³ç³»ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"tools","slug":"tools","permalink":"http://example.com/tags/tools/"}]},{"title":"ros_é™æ€TFçš„å‘å¸ƒ","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/å·¥å…·/ros_é™æ€TFçš„å‘å¸ƒ/","text":"ros_é™æ€TFçš„å‘å¸ƒä»æœºæ¢°è‡‚åº•åº§åˆ°ç›¸æœºâ€“&gt;ä½¿ç”¨é™æ€TFå‘å¸ƒ åŸç†ï¼šå‘å¸ƒ &#x2F;tf_staticè¯é¢˜ã€‚ ä½¿ç”¨transform3dåº“å¯ä»¥è®©å››å…ƒæ•°å’Œæ¬§æ‹‰åæ ‡ç›¸äº’è½¬æ¢ã€‚ [æ³¨]ï¼šå…³äºä¸ºä»€ä¹ˆé™æ€TFåªå‘å¸ƒä¸€æ¬¡ï¼Œä½†ä¹‹åå†å»è®¢é˜…è¿˜æœ‰æ¶ˆæ¯ï¼ŸåŸå› å°±åœ¨äºtf_staticæ¯å‘å¸ƒä¸€æ¬¡å°±ä¼šæ°¸ä¹…ä¿ç•™å½“å‰æœ€æ–°æ•°æ®ï¼Œå½“ä¸‹æ¬¡æœ‰è®¢é˜…è€…è®¢é˜…æ—¶è¿˜å¯ä»¥æœ‰å†…å®¹å‘å¸ƒã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;geometry_msgs/msg/transform_stamped.hpp&quot; // æ¶ˆæ¯æ¥å£#include &quot;tf2/LinearMath/Quaternion.hpp&quot; // æä¾›Quaternionç±»#include &quot;tf2_geometry_msgs/tf2_geometry_msgs.hpp&quot; // æ¶ˆæ¯ç±»å‹è½¬æ¢å‡½æ•°#include &quot;tf2_ros/static_transform_broadcaster.h&quot; //é™æ€åæ ‡å¹¿æ’­å™¨// mapåˆ°target_pointä¹‹é—´çš„åæ ‡å…³ç³»using static_tf = tf2_ros::StaticTransformBroadcaster;class StaticTfBc : public rclcpp::Node&#123;private: std::shared_ptr&lt;static_tf&gt; broadcaster_; // å£°æ˜ä¸€ä¸ªå¹¿æ’­å™¨ç±»çš„å…±äº«æŒ‡é’ˆpublic: StaticTfBc() : Node(&quot;static_node&quot;)&#123; this-&gt;broadcaster_ = std::make_shared&lt;static_tf&gt;(this); // åœ¨static_tfé‡Œé¢åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…æ¥å‘å¸ƒtf_staticçš„è¯é¢˜ this-&gt;publish_tf(); //é™æ€å‘å¸ƒï¼Œåªèƒ½å‘å¸ƒä¸€æ¬¡ &#125; void publish_tf()&#123; // åˆ›å»ºæ¶ˆæ¯æ¥å£ geometry_msgs::msg::TransformStamped tf; tf.header.stamp = this-&gt;get_clock()-&gt;now(); tf.header.frame_id = &quot;map&quot;; tf.child_frame_id = &quot;target_point&quot;; // ç»™å¹³ç§»éƒ¨åˆ†èµ‹å€¼ tf.transform.translation.x = 5.0; tf.transform.translation.y = 3.0; tf.transform.translation.z = 0.0; // å®šä¹‰ä¸€ä¸ªå››å…ƒæ•°ç±» tf2::Quaternion q; // æŠŠå·²çŸ¥æ¬§æ‹‰è§’åº¦è½¬æˆå››å…ƒæ•° q.setRPY(0.0, 0.0, 60*M_PI/180); // ç»™æ—‹è½¬éƒ¨åˆ†èµ‹å€¼ tf.transform.rotation = tf2::toMsg(q); // æŠŠæ¶ˆæ¯å‘å¸ƒå‡ºå» this-&gt;broadcaster_-&gt;sendTransform(tf); &#125;&#125;;int main(int argc, char* argv[])&#123; rclcpp::init(argc,argv); auto stb = std::make_shared&lt;StaticTfBc&gt;(); rclcpp::spin(stb); rclcpp::shutdown();&#125; â€œå››å…ƒæ•°.setRPY(x,y,z)â€ï¼šå°†ä¼ å…¥çš„æ¬§æ‹‰è§’åº¦(å¼§åº¦åˆ¶)è½¬æ¢ä¸ºå››å…ƒæ•°ã€‚ é™æ€åæ ‡çš„å‘å¸ƒç”¨åˆ°äº†é™æ€åæ ‡å¹¿æ’­å™¨ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"tools","slug":"tools","permalink":"http://example.com/tags/tools/"}]},{"title":"ros_å¸¸ç”¨å¯è§†åŒ–å·¥å…·rqt&Rvizå’Œæ•°æ®è®°å½•å·¥å…·ros2 bag","date":"2025-09-20T16:00:00.000Z","path":"2025/09/21/ros2/å·¥å…·/ros_å¸¸ç”¨å¯è§†åŒ–å·¥å…·rqt&Rvizå’Œæ•°æ®è®°å½•å·¥å…·ros2 bag/","text":"å¸¸ç”¨å¯è§†åŒ–å·¥å…·rqt&amp;Rvizå’Œæ•°æ®è®°å½•å·¥å…·ros2 bag åœ¨ç»ˆç«¯ä¸­è¾“å…¥â€rviz2â€å¯ä»¥å¯åŠ¨è¯¥å·¥å…·ã€‚ â€œros2 bag record è®¢é˜…çš„è¯é¢˜åå­—â€ï¼šå¯ä»¥è®°å½•ä¸‹è¯é¢˜ï¼Œæ–¹ä¾¿ä¸‹æ¬¡é‡æ’­ã€‚ â€œros2 bag play è®°å½•çš„æ–‡ä»¶åâ€ï¼šå¯ä»¥æ’­æ”¾è®°å½•çš„æ–‡ä»¶ã€‚ ã€æœªæˆåŠŸå®è·µç‰ˆã€‘","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"tools","slug":"tools","permalink":"http://example.com/tags/tools/"}]},{"title":"","date":"2025-09-19T13:17:16.591Z","path":"2025/09/19/ros2/ä»¿çœŸ/ros_ä½¿ç”¨URDFåˆ›å»ºæœºå™¨äºº/","text":"1.å¸®æœºå™¨äººåˆ›å»ºä¸€ä¸ªèº«ä½“ URDFä½¿ç”¨XMLæ¥æè¿°æœºå™¨äººçš„å‡ ä½•ç»“æ„ã€ä¼ æ„Ÿå™¨å’Œæ‰§è¡Œå™¨ç­‰ä¿¡æ¯ã€‚ e.gï¼šä¸‹è¿°ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºfirst_robotçš„æœºå™¨äººï¼Œè¯¥æœºå™¨äººæœ‰ä¸€ä¸ªbase_linkçš„éƒ¨ä»¶ã€‚ 12345&lt;?xml version=&quot;1.0&quot;?&gt;&lt;robot name=&quot;first_robot&quot;&gt; &lt;!--XMLæ³¨é‡Š--&gt; &lt;link name=&quot;base_link&quot;&gt;&lt;/link&gt;&lt;/robot&gt;","categories":[],"tags":[]},{"title":"LinuxåŸºç¡€ä¹‹ç¯å¢ƒå˜é‡","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/åŸºç¡€/ros_Linuxç¯å¢ƒå˜é‡/","text":"LinuxåŸºç¡€ä¹‹ç¯å¢ƒå˜é‡ ros2 å‘½ä»¤å°±æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡æ¥å¯»æ‰¾åŠŸèƒ½åŒ…çš„ã€‚ printenv:å¯ä»¥ç”¨æ¥æ‰“å°ç¯å¢ƒå˜é‡ã€‚ printenv | grep ç­›é€‰å†…å®¹ï¼šå¯ä»¥æŸ¥æ‰¾æ‰€é€‰å–çš„ç¯å¢ƒå˜é‡ã€‚ å½“å‡ºç°æŠ¥é”™â€œPackage xx not foundâ€æ—¶ï¼Œå¯ä»¥æ£€æŸ¥AMENT_PREFIX_PATHä¸‹çš„libæ˜¯å¦æœ‰è¿™ä¸ªåŒ…ã€‚ AMENT_PREFIX_PATHï¼ˆè·¯å¾„ï¼‰çš„åˆå§‹å€¼æ˜¯ç”±é»˜è®¤è„šæœ¬è®¾ç½®çš„ï¼Œè¯¥é»˜è®¤è„šæœ¬ä½ç½®ä¸º:~&#x2F;.bashrc[è¯¥æ–‡ä»¶ä¸ºéšè—æ–‡ä»¶]ã€‚ ä½¿ç”¨ ls -aå¯ä»¥æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„éšè—æ–‡ä»¶ã€‚ â€œsource &#x2F;opt&#x2F;ros&#x2F;jazzy&#x2F;setup.bashâ€è¯­å¥ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ã€‚åé¢ç»å¸¸ä¼šç”¨â€source install&#x2F;setup.bashâ€æ¥å°†colcon buildç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å†™å…¥Installæ–‡ä»¶ä¸­ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"foundation","slug":"foundation","permalink":"http://example.com/tags/foundation/"}]},{"title":"ä½¿ç”¨åŠŸèƒ½åŒ…ç»„ç»‡èŠ‚ç‚¹","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/åŸºç¡€/ros_ä½¿ç”¨åŠŸèƒ½åŒ…ç»„ç»‡èŠ‚ç‚¹/","text":"ä½¿ç”¨åŠŸèƒ½åŒ…ç»„ç»‡èŠ‚ç‚¹ğŸ’–åŸºæœ¬æµç¨‹ï¼šå‘½ä»¤è¡Œåˆ›å»ºåŠŸèƒ½åŒ…-&gt;åœ¨åŠŸèƒ½åŒ…ä¸­åˆ›å»ºèŠ‚ç‚¹-&gt;åœ¨set.upæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®-&gt;åœ¨xmlæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ä¿¡æ¯ï¼ˆä½†æ˜¯å¦‚æœåˆ›å»ºåŠŸèƒ½åŒ…æ—¶æ·»åŠ äº†â€“dependencieså°±ä¸éœ€è¦è¿™æ­¥ï¼‰-&gt;colcon buildè¿›è¡Œæ„å»º-&gt;source install&#x2F;setup.bash-&gt;â€œros2 run åŒ…å æ–‡ä»¶åâ€è¿è¡Œæ–‡ä»¶ ä½¿ç”¨â€ros2 pkg create demo_python_pkg â€“build-type ament_python â€“license Apache-2.0â€å¯ä»¥åˆ›å»ºPythonåŠŸèƒ½åŒ…ï¼Œå¦‚æœä¸æŒ‡å®šbuild-typeï¼Œé»˜è®¤ä¸ºC++ç±»å‹åŠŸèƒ½åŒ…ã€‚ã€æœ‰æ—¶å€™è¿˜ä¼šæœ‰â€“dependenciesç­‰é€‰é¡¹ã€‘ å¯ä»¥åœ¨ç¬¬äºŒçº§demo_python_pkgç›®å½•ä¸‹æ–°å»ºèŠ‚ç‚¹æ–‡ä»¶ã€‚ åœ¨åŠŸèƒ½åŒ…ä¸­æ³¨å†ŒèŠ‚ç‚¹ã€‚[å³åœ¨setup.pyæ–‡ä»¶ä¸­æ·»åŠ èŠ‚ç‚¹å‡½æ•°åœ¨é‚£ä¸€å±‚] æ‰“å¼€åŠŸèƒ½åŒ…ä¸­çš„xmlæ–‡ä»¶æ·»åŠ ä¾èµ–ä¿¡æ¯ã€‚[æ·»åŠ â€œrclpyâ€] â€œcolcon buildâ€:åŠŸèƒ½åŒ…çš„æ„å»ºã€‚[æ”¯æŒè½¯é“¾æ¥ï¼Œä¼šæŠŠåŸæ¥çš„åŒ…å¤åˆ¶ä¸€ä»½ï¼Œç„¶åæ‰§è¡Œå¤åˆ¶çš„é‚£ä»½ï¼Œå³åœ¨installé‡Œé¢çš„python3.12&#x2F;site-packagesä¸­æœ€é‡Œé¢é‚£ä¸ªpython_node.py] [æ³¨]ï¼šcolcon buildä¸€èˆ¬åœ¨å·¥ä½œç©ºé—´çš„æ ¹ç›®å½•ä¸‹è¿›è¡Œï¼Œå¯ä»¥ä½¿ç”¨â€œcolcon build-packages-select åŒ…åâ€å¯¹ç‰¹å®šçš„åŒ…è¿›è¡Œæ„å»ºã€‚ â€œsource install&#x2F;setup.bashâ€ï¼šç”Ÿæˆç¯å¢ƒå˜é‡ã€‚[setup.bashè„šæœ¬ç”¨äºä¿®æ”¹ç¯å¢ƒå˜é‡] [è¡¥]:â€ros2 åŠŸèƒ½åŒ…å èŠ‚ç‚¹åâ€ï¼šè¿è¡ŒèŠ‚ç‚¹ 7.export PYTHONPATH&#x3D;æ–°ä½ç½®:$PYTHONPATHâ€:ä¸´æ—¶ä¿®æ”¹å‚æ•°çš„ç¯å¢ƒå˜é‡ã€‚[ä½¿ç”¨6å°±å¯ä»¥ä¸ç”¨è¿™ä¸ªæ–¹æ³•] 8.ä¿®æ”¹ç¯å¢ƒå˜é‡çš„å‡ ç§æ–¹æ³•ï¼š æ‰‹åŠ¨ä¿®æ”¹ï¼Œå³ä½¿ç”¨ç¬¬7ç‚¹ è‡ªåŠ¨ä¿®æ”¹ï¼Œå³ä½¿ç”¨ç¬¬6ç‚¹ 9.å¦‚æœå¸Œæœ›èŠ‚ç‚¹èƒ½ä»¥â€ros2 run åŒ…å èŠ‚ç‚¹åâ€çš„å½¢å¼è¿è¡Œï¼Œåˆ›å»ºç±»çš„æ—¶å€™éœ€è¦å¯¹rclcpp&#x2F;rclpyä¸­çš„Nodeè¿›è¡Œç»§æ‰¿ã€‚ å…³äºC++å’ŒPythonç»§æ‰¿Nodeåï¼Œåœ¨mainå‡½æ•°ä¸­çš„ä»£ç ä¸»è¦æ¡†æ¶ï¼š C++ï¼š 1234567int main(int argc, char* argv)&#123; rclcpp::init(argc,argv); ... rclcpp::spin(åˆ›å»ºçš„èŠ‚ç‚¹); rclcpp::shutdown(); return 0;&#125; Pythonï¼š 12345def main: rclpy.init() ... rclpy.spin(èŠ‚ç‚¹) rclpy.shutdown()","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"foundation","slug":"foundation","permalink":"http://example.com/tags/foundation/"}]},{"title":"å¤šçº¿ç¨‹ä¸å›è°ƒå‡½æ•°","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/åŸºç¡€/ros_å¤šçº¿ç¨‹ä¸å›è°ƒå‡½æ•°(Pythonç‰ˆ)/","text":"å¤šçº¿ç¨‹ä¸å›è°ƒå‡½æ•°â”—|ï½€Oâ€²|â”› å—·~ğŸ– ~w(ï¾ŸĞ”ï¾Ÿ)w å›è°ƒå‡½æ•°ï¼šæŠŠç»Ÿè®¡å‡½æ•°å½“ä½œå‚æ•°ä¼ é€’ç»™ä¸‹è½½å‡½æ•°ï¼Œä¸‹è½½å®Œæˆè‡ªå·±ç¬¬ä¸€æ—¶é—´è°ƒç”¨ã€‚ â€œthreading.get_ident()â€ï¼šå¯ä»¥å¾—åˆ°çº¿ç¨‹ç¼–å·(pythonä¸­)ï¼›â€this_thread.get_id()â€ï¼šå¯ä»¥å¾—åˆ°çº¿ç¨‹ç¼–å·(c++ä¸­)ã€‚ â€œecho â€œæ–‡å­—â€ â€œ&gt; æ–‡ä»¶å,å¯ç”Ÿæˆå¯¹åº”æ–‡ä»¶,å¹¶å°†æ–‡å­—å†™å…¥ã€‚ â€œpython3 -m http.serverâ€ï¼šå¯åŠ¨python3çš„å†…ç½®æœåŠ¡å™¨ã€‚ ä¸€ä¸ªç¨‹åºé»˜è®¤æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å®Œæˆçš„ï¼Œå¦‚æœéœ€è¦å¤šä¸ªçº¿ç¨‹å¹¶è¡Œï¼Œåˆ™éœ€è¦ä½¿ç”¨threadã€‚ ä¸pythonä¸­çš„å¤šçº¿ç¨‹ä¸åŒï¼Œc++ä¸­çš„çº¿ç¨‹ä¸€æ—¦åˆ›å»ºå°±ç«‹åˆ»è¿è¡Œï¼Œå¹¶é˜»å¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ç”¨â€thread.detach()â€å°†å…¶ä¸å½“å‰è¿›ç¨‹è¿›è¡Œåˆ†ç¦»ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"foundation","slug":"foundation","permalink":"http://example.com/tags/foundation/"}]},{"title":"æœ‰ç”¨çš„C++ç‰¹æ€§","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/åŸºç¡€/ros_å¸¸ç”¨çš„C++ç‰¹æ€§/","text":"æœ‰ç”¨çš„C++ç‰¹æ€§1.auto èŠ‚ç‚¹åå­— &#x3D; std::make_shared&lt;ç±»å&gt;(â€œèŠ‚ç‚¹åå­—â€) nodeçš„ç±»å‹æ˜¯è‡ªåŠ¨æ¨å¯¼çš„ã€‚ 2.æ™ºèƒ½æŒ‡é’ˆ&#x2F;å…±äº«æŒ‡é’ˆ:ä¸“æ²»å ç€å†…å­˜ä¸ä½¿ç”¨çš„ç¨‹åºã€‚ æŒ‡é’ˆ.use_count()ï¼šå¾—åˆ°æŒ‡é’ˆå¼•ç”¨æ¬¡æ•°ã€‚ æŒ‡é’ˆ.get():å¾—åˆ°æŒ‡å‘çš„å†…å­˜åœ°å€ã€‚ æŒ‡é’ˆ-&gt;c_str():å¾—åˆ°æŒ‡é’ˆæŒ‡å‘å†…å­˜åœ°å€æ•°æ®ã€‚ å¯¹è±¡.å‡½æ•°(å‚æ•°):ç›´æ¥é€šè¿‡å¯¹è±¡è®¿é—®æˆå‘˜ æŒ‡é’ˆ-&gt;å‡½æ•°(å‚æ•°):é€šè¿‡æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆè®¿é—®æˆå‘˜ã€‚ å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªè¦çœ‹â€œè®¿é—®è€…æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè¿˜æ˜¯æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆâ€ã€‚ CPPçš„â€colcon buildâ€ä¼šæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æ²¡æœ‰sourceä¹Ÿèƒ½è¿è¡Œã€‚(ä½†æœ€å¥½è¿˜æ˜¯buildä¸€ä¸‹å¥½) ğŸ’¥3.lambdaè¡¨è¾¾å¼(æ”¾åœ¨å‡½æ•°é‡Œé¢ç”¨)å³æ¢ä¸ªè¯­æ³•å†™å‡½æ•°ï¼šcapture list-(parameter list)&gt;return type{function body} æ³¨:å¸¸ç”¨[&amp;](è¾“å…¥åˆ—è¡¨)-&gt;void{å‡½æ•°ä½“}ï¼Œå…¶ä¸­voidè¡¨ç¤ºä¸è¿”å› æ•è·åˆ—è¡¨å¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤æ•è·æ¨¡å¼&amp;æˆ–è€…&#x3D;è¡¨ç¤ºæŒ‰å¼•ç”¨æˆ–è€…å€¼æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡ã€‚ ğŸ’¥4.å‡½æ•°åŒ…è£…å™¨ï¼šç»Ÿä¸€è‡ªç”±å‡½æ•°ã€æˆå‘˜æ–¹æ³•å’ŒLambdaå‡½æ•° å¯¹äºè‡ªç”±å‡½æ•°ï¼šstd::function&lt;å‡½æ•°è¿”å›å€¼(å‡½æ•°ä¼ å…¥å‚æ•°)&gt; ç»™è¯¥å‡½æ•°ä¸€ä¸ªæ–°åå­— &#x3D; åŸè‡ªç”±å‡½æ•°å; å¯¹äºlambdaå‡½æ•°: åŒè‡ªç”±å‡½æ•°; å¯¹äºæˆå‘˜æ–¹æ³•ã€è¾ƒå¤æ‚ã€‘ï¼š std::function&lt;æ–¹æ³•è¿”å›å€¼(æ–¹æ³•ä¼ å…¥å‚æ•°)&gt; ç»™è¯¥å‡½æ•°ä¸€ä¸ªæ–°åå­— &#x3D; std::bind(ç±»å¯¹åº”å‡½æ•°çš„æŒ‡é’ˆ&#x2F;æ¨¡æ¿åœ°å€,å¯¹è±¡çš„æŒ‡é’ˆ,å‚æ•°æ•°é‡å ä½ç¬¦); or std::function&lt;æ–¹æ³•è¿”å›å€¼(æ–¹æ³•ä¼ å…¥å‚æ•°)&gt; ç»™è¯¥å‡½æ•°ä¸€ä¸ªæ–°åå­— &#x3D; std::bind(ç±»å¯¹åº”åˆ›é€ çš„å¯¹è±¡,ç±»ä¸­è¦è°ƒç”¨çš„æ–¹æ³•,å‚æ•°æ•°é‡å ä½ç¬¦); æ³¨ï¼šå…³äºç»‘å®šbindå¾ˆå¥½è§£å†³äº†è°ƒç”¨æˆå‘˜å‡½æ•°å¿…é¡»è¦å…ˆåˆ›é€ ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„é—®é¢˜ï¼Œå®ƒç›´æ¥ç»‘å®šäº†ä¸€ä¸ªå¯¹è±¡ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"foundation","slug":"foundation","permalink":"http://example.com/tags/foundation/"}]},{"title":"è¡¥å……ä¸€äº›åŸºç¡€ç¼–ç¨‹çŸ¥è¯†","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/åŸºç¡€/ç¼–ç¨‹åŸºç¡€è¡¥å……/","text":"è¡¥å……ä¸€äº›åŸºç¡€ç¼–ç¨‹çŸ¥è¯†1.æ¯æ¬¡ä¿®æ”¹ä»£ç æ–‡ä»¶åï¼Œéœ€è¦é‡æ–°colcon buildæ„å»ºå†è¿è¡Œã€‚ 2.é¢å‘å¯¹è±¡ç¼–ç¨‹éƒ½å¯ä»¥åˆ›å»ºç±»ï¼Œç±»æ˜¯å¯¹äº‹ç‰©çš„å°è£…ã€‚ 3.å¯¹äºç»§æ‰¿ï¼špythonï¼š â€œfrom çˆ¶ç±»æ‰€åœ¨æ–‡ä»¶ import çˆ¶ç±»â€; class å­ç±»(çˆ¶ç±»): ; â€œ.super().init(çˆ¶ç±»æ„é€ éœ€è¦çš„å‚æ•°)â€ :è°ƒç”¨çˆ¶ç±»çš„initæ–¹æ³•ã€‚ c++: class å­ç±» : public çˆ¶ç±» ã€ä¾‹å¦‚ã€‘ï¼š 1Class PersonNode : public rclcpp::Node - å­ç±»(const å‚æ•°ç±»å‹ &amp;å‚æ•°1,â€¦):çˆ¶ç±»(const å‚æ•°ç±»å‹ &amp;çˆ¶ç±»æ„é€ æ‰€éœ€å‚æ•°); æ³¨ï¼šåˆ›å»ºå…±äº«æŒ‡é’ˆï¼Œâ€auto èŠ‚ç‚¹åå­— &#x3D; std::make_shared&lt;ç±»å&gt;(â€œèŠ‚ç‚¹åâ€)â€ æ³¨ï¼š ä½¿ç”¨å…±äº«æŒ‡é’ˆéœ€è¦å¤´æ–‡ä»¶ RCLCPP_INFO(èŠ‚ç‚¹åå­—-&gt;get_logger(),â€è¦æ‰“å°å‡ºæ¥çš„æ–‡å­—ä¿¡æ¯â€); æ³¨æ„è¿™ä¸ªå‡½æ•°çš„å‚æ•°å½¢å¼ã€‚ ä¼ å…¥æ—¶æ ¼å¼ä¸ºâ€stringâ€,è¾“å‡ºæ—¶ä¸ºâ€%sâ€,åˆ™å¯ä»¥åœ¨è¾“å‡ºæ—¶åŠ ä¸Šâ€.c_str()è¿›è¡Œå¼ºåˆ¶è½¬æ¢â€ã€‚ã€c_str():å°†strç±»å‹è½¬æ¢ä¸ºcè¯­è¨€æ ¼å¼çš„å­—ç¬¦ä¸²ã€‘ CPPæ–‡ä»¶ä¸­ï¼Œæœ‰æ—¶å€™æ„é€ å‡½æ•°æ—¶ä¼šåœ¨ä¼ å…¥å‚æ•°å‰åŠ ä¸Šâ€constâ€ï¼ˆåŠ åœ¨ç±»å‹å‰ï¼‰å’Œâ€&amp;â€ï¼ˆåŠ åœ¨å˜é‡åå‰ï¼‰ï¼ŒåŠ ä¸Šå‰è€…æ˜¯å¸Œæœ›ç”¨æˆ·ä¸è¦å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ŒåŠ ä¸Šåè€…(ç§°ä¸ºæ‹·è´æŒ‡é’ˆ)æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„æ•°æ®æ‹·è´ï¼Œä»¥æé«˜è¿è¡Œæ•ˆç‡ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"foundation","slug":"foundation","permalink":"http://example.com/tags/foundation/"}]},{"title":"gitå‘½ä»¤åŸºç¡€å…¥é—¨","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_gitå…¥é—¨/","text":"gitå‘½ä»¤åŸºç¡€å…¥é—¨ å…‹éš†ä»“åº“ 12git clone åœ°å€cd repo åˆ›å»ºæ–°åˆ†æ”¯ 1git checkout -b new-feature æš‚å­˜æ–‡ä»¶ï¼šå°†ä¿®æ”¹è¿‡çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº 12git add æ–‡ä»¶ågit add . # æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶ æäº¤æ›´æ”¹ï¼šå°†æš‚å­˜åŒºçš„æ›´æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“ 1git commit -m &quot;é™„åŠ ä¿¡æ¯&quot; æ‹‰å–æœ€æ–°æ›´æ”¹ï¼šåœ¨æ¨é€æœ¬åœ°ä¹‹å‰ï¼Œæœ€å¥½ä»è¿œç¨‹ä»“åº“æ‹‰å–æœ€æ–°çš„æ›´æ”¹ï¼Œä»¥å…å†²çª 12git pull origin maingit pull origin new-feature #æ·»åŠ åœ¨æ–°çš„åˆ†æ”¯ä¸Š åˆå¹¶æ›´æ”¹ï¼šåœ¨PRå®¡æ ¸è¿‡åˆå¹¶åï¼Œå¯ä»¥å°†è¿œç¨‹ä»“åº“çš„ä¸»åˆ†æ”¯åˆå¹¶åœ¨æœ¬åœ°åˆ†æ”¯ 123git checkout maingit pull origin maingit merge new-feature åˆ é™¤åˆ†æ”¯ 12git branch -d new-featuregit push origin --delete new-feature [æ¥ä¸‹æ¥æ˜¯åŸºç¡€ä½†è¾ƒæœ‰ç”¨çš„åŠŸèƒ½] git statusï¼šæŸ¥çœ‹ä»“åº“å½“å‰çŠ¶æ€ï¼Œæ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ã€‚ git diffï¼šæ¯”è¾ƒæ–‡ä»¶çš„ä¸åŒï¼Œå³æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ã€‚ git difftoolï¼šä½¿ç”¨å¤–éƒ¨å·¥å…·æ¯”è¾ƒæ–‡ä»¶å·®å¼‚ã€‚ git resetï¼šå›é€€ç‰ˆæœ¬ï¼ˆå³æŠŠæš‚å­˜åŒºçš„æ–‡ä»¶æ’¤å‡ºï¼‰ã€‚ git rmï¼šå°†æ–‡ä»¶ä»æš‚å­˜åŒºå’Œå·¥ä½œåŒºåˆ é™¤ã€‚ git mvï¼šç§»åŠ¨æˆ–è€…é‡å‘½åå·¥ä½œåŒºæ–‡ä»¶ã€‚ git notesï¼šæ·»åŠ æ³¨é‡Šã€‚ git checkoutï¼šåˆ†æ”¯åˆ‡æ¢ã€‚|git switchï¼šæ›´æ¸…æ™°çš„åˆ†æ”¯åˆ‡æ¢ã€‚ git restoreï¼šæ¢å¤æˆ–æ’¤é”€æ–‡ä»¶æ›´æ”¹ã€‚ git showï¼šæ˜¾ç¤ºgitå¯¹è±¡è¯¦ç»†ä¿¡æ¯ã€‚ git logï¼šæŸ¥çœ‹å†å²æäº¤è®°å½•ã€‚ git blame ï¼šä»¥åˆ—è¡¨å½¢å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•ã€‚ å…³äºè¿œç¨‹æ“ä½œï¼š git removeï¼šè¿œç¨‹ä»“åº“æ“ä½œã€‚ git fetchï¼šä»è¿œç¨‹è·å¾—ä»£ç ã€‚ git pullï¼šä¸‹è½½è¿œç¨‹ä»£ç å¹¶åˆå¹¶ã€‚ git pushï¼šä¸Šä¼ è¿œç¨‹ä»£ç å¹¶åˆå¹¶ã€‚ git submoduleï¼šç®¡ç†åŒ…å«å…¶ä»–Gitä»“åº“çš„é¡¹ç›®ã€‚ å…³äºgitå¿½ç•¥æ–‡ä»¶çš„å‘½ä»¤ 123git add .gitinore (åœ¨gitinoreæ–‡ä»¶ä¸­æ·»åŠ ä¸éœ€è¦åŠ å…¥ç¼“å†²åŒºçš„æ–‡ä»¶)git commit -m &quot;æ³¨é‡Š&quot;ï¼šæ·»åŠ å¿½ç•¥æ–‡ä»¶ï¼›rm -rf .git ï¼šåˆ é™¤ .gitç›®å½•ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"è¯é¢˜é€šä¿¡ä»‹ç»","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_è¯é¢˜é€šä¿¡ä»‹ç»/","text":"è¯é¢˜é€šä¿¡ä»‹ç»1.è¯é¢˜é€šä¿¡æœ‰å››ä¸ªå…³é”®ç‚¹ï¼šå‘å¸ƒè€…ã€è®¢é˜…è€…ã€è¯é¢˜åç§°å’Œè¯é¢˜ç±»å‹ã€‚ 2.â€ros2 node info &#x2F;èŠ‚ç‚¹åå­—â€ï¼šæŸ¥çœ‹æ¥å£å®šä¹‰ã€‚ï¼ˆæœ‰å‘å¸ƒè€…ä»¥åŠè®¢é˜…è€…ç­‰ç›¸å…³ä¿¡æ¯ï¼‰ã€å‘å¸ƒè€…ä¸‹çš„å†…å®¹æ ¼å¼ï¼šè¯é¢˜ï¼šæ¶ˆæ¯æ¥å£ã€‘ 3.â€ros2 topic echo &#x2F;è¯é¢˜åå­—â€ï¼šæŸ¥çœ‹è¯é¢˜å†…å®¹ã€‚ 4.â€ros2 topic info &#x2F;è¯é¢˜åå­—â€ï¼šæŸ¥çœ‹æ¶ˆæ¯æ¥å£ã€‚ 5.â€ros2 interface show æ¶ˆæ¯æ¥å£â€ï¼šæ‰¾åˆ°æ¶ˆæ¯æ¥å£çš„å®šä¹‰ã€‚ 6.â€ros2 topic pub &#x2F;è¯é¢˜åå­— æ¶ˆæ¯æ¥å£ æ¶ˆæ¯æ¥å£æ ·æœ¬æ ¼å¼çš„æ•°æ®å¡«å……â€:ä½¿ç”¨è¯é¢˜æ§åˆ¶æœºå™¨äººã€‚ã€ä½¿ç”¨è®¢é˜…è€…è¯é¢˜ã€‘ æ³¨ï¼šæ¶ˆæ¯æ¥å£æ ·æœ¬æ ¼å¼çš„æ•°æ®å¡«å……å¯ä»¥åœ¨â€æ¶ˆæ¯æ¥å£çš„å®šä¹‰â€å¤„æŸ¥çœ‹ï¼Œæ¯ä¸‹ä¸€ä¸ªçº§åˆ«ï¼Œéœ€è¦åŠ â€{}â€ï¼Œå‚æ•°åç§°åçš„â€:â€å’Œè‡ªå®šä¹‰å‚æ•°å€¼ä¹‹é—´éœ€è¦åŠ ä¸€ä¸ªç©ºæ ¼ã€‚ å½“è‡ªå®šä¹‰æ¶ˆæ¯æ¥å£æˆ–è€…è°ƒç”¨è¯é¢˜æ¥å£æ—¶å¸¸è§æ­¥éª¤ï¼š â€œros2 topic list -tâ€ï¼šè¿”å›è¯é¢˜åŠå¯¹åº”çš„æ¶ˆæ¯æ¥å£ã€‚ â€œros2 interface show æ¶ˆæ¯æ¥å£â€ï¼šæŸ¥æ¶ˆæ¯æ¥å£çš„è¯¦ç»†å†…å®¹ | â€œros2 interface proto æ¶ˆæ¯æ¥å£â€ï¼šæ˜¾ç¤ºæ¶ˆæ¯æ¨¡æ¿ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"ç¼–å†™ç¬¬ä¸€ä¸ªROSèŠ‚ç‚¹","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/åŸºç¡€/ros_ç¼–å†™ç¬¬ä¸€ä¸ªC++èŠ‚ç‚¹&PythonèŠ‚ç‚¹/","text":"ç¼–å†™ç¬¬ä¸€ä¸ªROSèŠ‚ç‚¹rosä¸­ç¼–å†™C++èŠ‚ç‚¹ å½“é¡¹ç›®è¾ƒå°æ—¶ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨â€g++ cppæ–‡ä»¶åâ€ï¼Œå¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†ä½¿ç”¨â€œ.&#x2F;å¯æ‰§è¡Œæ–‡ä»¶åâ€è¿è¡Œç¨‹åºã€‚ å½“é¡¹ç›®è¾ƒå¤§æ—¶ï¼Œä½¿ç”¨CMakeå¾—åˆ°ç”ŸæˆæŒ‡ä»¤ã€‚è¿‡ç¨‹ï¼šç¼–å†™ä¸€ä¸ªCMakeList.txtæ–‡ä»¶(æ–‡ä»¶åä¸èƒ½æ”¹)-&gt;ä½¿ç”¨cmakeæŒ‡ä»¤è½¬åŒ–ä¸ºMakefileæ–‡ä»¶-&gt;ä½¿ç”¨makeæŒ‡ä»¤è½¬åŒ–ä¸ºexeæ–‡ä»¶ã€‚ rosä¸­ç¼–å†™PythonèŠ‚ç‚¹1.ç›´æ¥ç¼–å†™åå°±å¯ä»¥ä½¿ç”¨â€run æ–‡ä»¶åâ€è¿›è¡Œè¿è¡Œã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"foundation","slug":"foundation","permalink":"http://example.com/tags/foundation/"}]},{"title":"è¯é¢˜é€šä¿¡å®è®­-è®¢é˜…poseå®ç°é—­ç¯æ§åˆ¶","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_è¯é¢˜é€šä¿¡å®æˆ˜_è®¢é˜…poseå®ç°é—­ç¯æ§åˆ¶/","text":"è¯é¢˜é€šä¿¡å®è®­-è®¢é˜…poseå®ç°é—­ç¯æ§åˆ¶æ ¸å¿ƒä»»åŠ¡ï¼š 1. å°æµ·é¾Ÿæ€ä¹ˆå¬æˆ‘çš„ï¼Ÿå‘å¸ƒè¯é¢˜ï¼› 2. å°æµ·é¾Ÿç°åœ¨åœ¨å“ªé‡Œï¼Ÿè®¢é˜…è¯é¢˜ï¼› 3. æ€ä¹ˆæ ¹æ®å½“å‰ä½ç½®å’Œç›®æ ‡ä½ç½®è®¡ç®—è§’é€Ÿåº¦å’Œçº¿é€Ÿåº¦ï¼Ÿä¸¤ç‚¹ä¹‹é—´è·ç¦»-&gt;çº¿é€Ÿåº¦ å½“å‰æœå‘å’Œç›®æ ‡æœå‘-&gt;è§’é€Ÿåº¦ã€‚ 1.å®šä¹‰æ§åˆ¶å°æµ·é¾Ÿçš„ç±» å±æ€§ï¼š å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ è®¢é˜…è€…çš„æ™ºèƒ½æŒ‡é’ˆ ç›®æ ‡åæ ‡ç‚¹ã€æ¯”ä¾‹ç³»æ•°ï¼ˆç”¨äºæ§åˆ¶è¿è¡Œé€Ÿåº¦ï¼‰ã€æœ€å¤§é€Ÿåº¦ æ–¹æ³•ï¼š è·å–å½“å‰ä½ç½®ï¼Œå¹¶è®¡ç®—æ–°ä½ç½®å‘å¸ƒå‡ºå»çš„å‡½æ•° ã€æ³¨ã€‘ï¼š ä¸åŒäºpythonï¼ŒC++åœ¨åˆ›å»ºå®ä¾‹å‰éœ€è¦å£°æ˜ã€‚ä»¥ä¸‹æ˜¯å‘å¸ƒè€…å’Œè®¢é˜…è€…å£°æ˜çš„ä»£ç ï¼š 12rclcpp::Publisher&lt;æ¶ˆæ¯æ¥å£&gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½å…±äº«æŒ‡é’ˆrclcpp::Subscription&lt;æ¶ˆæ¯æ¥å£&gt;::SharedPtr subscriber_; //è®¢é˜…è€…çš„æ™ºèƒ½å…±äº«æŒ‡é’ˆ å‘å¸ƒè€…å’Œè®¢é˜…è€…åˆ›å»ºä»£ç ï¼š 123publisher_ = this-&gt;create_publisher&lt;æ¶ˆæ¯æ¥å£&gt;(&quot;è¯é¢˜åç§°&quot;,qos); //åˆ›å»ºå‘å¸ƒè€…subscriber_ = this-&gt;create_subscription&lt;æ¶ˆæ¯æ¥å£&gt;(&quot;è¯é¢˜åç§°&quot;,qos,std::bind(&amp;TurtleControlNode::on_pose_received,this, std::placeholders::_1)); //åˆ›å»ºè®¢é˜…è€… å…³äºå›è°ƒå‡½æ•°ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯å°†æˆå‘˜æ–¹æ³•æ”¾å…¥å‡½æ•°åŒ…è£…å™¨ä¸­ï¼ˆå…¶å®ç”¨lambdaå‡½æ•°æ›´ç®€å•ï¼‰ã€‚å‡½æ•°å½¢å¼ï¼šstd::bind(&amp;ç±»èŠ‚ç‚¹å®ä¾‹åŒ–, å¯¹è±¡æŒ‡é’ˆ, å‚æ•°å ä½ç¬¦))ã€‚â€è®¢é˜…è€…çš„è¯é¢˜åç§°â€è¦ä¸å¯¹åº”çš„å‘å¸ƒè€…æ¶ˆæ¯æ¥å£å¯¹åº”ã€‚ 2.å®Œæ•´ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;geometry_msgs/msg/twist.hpp&quot;#include &quot;turtlesim/msg/pose.hpp&quot;#include &lt;chrono&gt;using namespace std::chrono_literals;class TurtleControlNode: public rclcpp::Node&#123;private: // rclcpp::TimerBase::SharedPtr timer_; rclcpp::Publisher&lt;geometry_msgs::msg::Twist&gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½å…±äº«æŒ‡é’ˆ rclcpp::Subscription&lt;turtlesim::msg::Pose&gt;::SharedPtr subscriber_; //è®¢é˜…è€…çš„æ™ºèƒ½å…±äº«æŒ‡é’ˆ double target_x_&#123;1.0&#125;; double target_y_&#123;1.0&#125;; double k_&#123;1.0&#125;; //æ¯”ä¾‹ç³»æ•°ã€é—´æ¥æ§åˆ¶é€Ÿåº¦ã€‘ double max_speed_&#123;3.0&#125;; //æœ€å¤§é€Ÿåº¦ public: explicit TurtleControlNode(const std::string&amp; node_name):Node(node_name) &#123; publisher_ = this-&gt;create_publisher&lt;geometry_msgs::msg::Twist&gt;(&quot;/turtle1/cmd_vel&quot;,10); // è¿™é‡Œä¼ å…¥è¿åŠ¨æ§åˆ¶çš„æ¶ˆæ¯æ¥å£ï¼Œç”±å…¶å‘å¸ƒæ§åˆ¶ä¿¡æ¯ç»™å°æµ·é¾Ÿ subscriber_ = this-&gt;create_subscription&lt;turtlesim::msg::Pose&gt;(&quot;/turtle1/pose&quot;,10,std::bind(&amp;TurtleControlNode::on_pose_received,this, std::placeholders::_1)); // timer_ = this-&gt;create_wall_timer(1000ms, std::bind(&amp;TurtleControlNode::timer_callback,this)); &#125; // è·å–å½“å‰ä½ç½®ï¼Œå¹¶è®¡ç®—æ–°ä½ç½®å‘å¸ƒå‡ºå» void on_pose_received(const turtlesim::msg::Pose::SharedPtr pose)&#123; //å‚æ•°ï¼šæ”¶åˆ°æ•°æ®çš„å…±äº«æŒ‡é’ˆ // 1.è·å–å½“å‰ä½ç½® auto current_x = pose-&gt;x; auto current_y = pose-&gt;y; RCLCPP_INFO(get_logger(),&quot;è·å–å½“å‰ä½ç½®:x=%f,y=%f&quot;,current_x,current_y); // 2.è®¡ç®—å½“å‰æµ·é¾Ÿä½ç½®è·Ÿç›®æ ‡ä½ç½®ä¹‹é—´çš„è·ç¦»å·®å’Œè§’åº¦å·®ã€‚ auto distanc e = std::sqrt((target_x_-current_x)*(target_x_-current_x)+(target_y_-current_y)*(target_y_-current_y)); // ç›®æ ‡è§’åº¦å’Œå½“å‰è§’åº¦çš„å·®å€¼ auto angle = std::atan2((target_y_-current_y),(target_x_-current_x))- pose-&gt;theta; // 3.æ§åˆ¶ç­–ç•¥ auto msg = geometry_msgs::msg::Twist(); if(distance&gt;0.1)&#123; if(fabs(angle)&gt;0.2)&#123; msg.angular.z = fabs(angle); //å¦‚æœè§’åº¦å·®å¤§äº0.2åˆ™æ”¹å˜è§’åº¦(è¿›è¡Œæ—‹è½¬) &#125;else&#123; msg.linear.x = k_*distance; //å¦‚æœè§’åº¦å·®ä¸å¤§ï¼Œåˆ™æé«˜é€Ÿåº¦ &#125; &#125; //é™åˆ¶æœ€å¤§çº¿é€Ÿåº¦ if(msg.linear.x &gt; max_speed_)&#123; msg.linear.x = max_speed_; &#125; publisher_-&gt;publish(msg); &#125;&#125;;int main(int argc,char* argv[])&#123; rclcpp::init(argc, argv); auto node = std::make_shared&lt;TurtleControlNode&gt;(&quot;turtle_control&quot;); rclcpp::spin(node); rclcpp::shutdown(); return 0;&#125; å­¦ä¹ æ”¶è·ï¼š å­¦ä¼šäº†C++ç‰ˆæœ¬çš„å‘å¸ƒè€…å’Œè®¢é˜…è€…çš„å£°æ˜å’Œåˆ›å»ºã€‚ åœ¨å°æµ·é¾Ÿç¨‹åºä¸­ï¼Œå¯ä»¥é€šè¿‡â€urtlesim&#x2F;msg&#x2F;poseâ€æ¥å£æ¥è·å–å½“å‰æµ·é¾Ÿä½ç½®ï¼Œé€šè¿‡â€geometry_msgs&#x2F;msg&#x2F;twistâ€æ¥å£æ¥æ§åˆ¶æµ·é¾Ÿçš„è¿åŠ¨ã€‚ åœ¨å…³é”®å­—å‰æ·»åŠ â€explicitâ€ï¼šé˜²æ­¢ç±»è¿›è¡Œå•å‚æ•°éšå¼è½¬æ¢ã€‚å³ç±»çš„æ„é€ å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡å”¯ä¸€çš„å‚æ•°å€¼æ¥æ„é€ è¯¥ç±»ã€‚ c++ä¸­çš„â€::â€ï¼šè®¿é—®å‘½åç©ºé—´å†…çš„æ ‡è¯†ç¬¦ï¼Œé¿å…ä¸åŒå‘½åç©ºé—´çš„åŒåå†²çªã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"è¯é¢˜é€šä¿¡å®æˆ˜_è‡ªå®šä¹‰å®ç°å®æ—¶çŠ¶æ€ä¿¡æ¯æŸ¥è¯¢å°å·¥å…·","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_è¯é¢˜é€šä¿¡å®æˆ˜_è‡ªå®šä¹‰å®ç°å®æ—¶çŠ¶æ€ä¿¡æ¯æŸ¥è¯¢å°å·¥å…·/","text":"è¯é¢˜é€šä¿¡å®æˆ˜_è‡ªå®šä¹‰å®ç°å®æ—¶çŠ¶æ€ä¿¡æ¯æŸ¥è¯¢å°å·¥å…·éœ€æ±‚ï¼š é€šè¿‡è¯¥å·¥å…·å¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„å®æ—¶çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬è®°å½•ä¿¡æ¯çš„æ—¶é—´ã€ä¸»æœºåç§°ã€cpuä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€å†…å­˜æ€»å¤§å°ã€å‰©ä½™å†…å­˜ã€ç½‘ç»œæ¥æ”¶æ•°æ®é‡å’Œç½‘ç»œå‘é€æ•°æ®é‡ã€‚ è¦æœ‰ä¸€ä¸ªç®€å•çš„ç•Œé¢ï¼Œå¯ä»¥å°†ç³»ç»Ÿä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ã€‚ è¦èƒ½åœ¨å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºä¸ŠæŸ¥çœ‹æ•°æ®ã€‚ åˆ†æï¼š è¦èƒ½è·å–ç³»ç»ŸçŠ¶æ€ä¿¡æ¯â€“&gt;pythonåº“psutils; è¦æœ‰ä¸€ä¸ªå±•ç¤ºç•Œé¢â€“&gt;QT; è¦èƒ½å…±äº«æ•°æ®â€“&gt;ROS2è¯é¢˜ã€‚æ€»ä½“æ¶æ„ï¼š&#x2F;sys_status_pubâ€”-&gt;&#x2F;sys_statusâ€”&gt;&#x2F;sys_status_display æ­¥éª¤ï¼š 1. è‡ªå®šä¹‰é€šä¿¡æ¥å£ã€æ³¨ã€‘ï¼š builtin_interfaces()ï¼šæä¾›æ—¶é—´æˆ³ï¼› æŒ‰ç…§éœ€æ±‚ç¼–å†™ä¸€ä¸ª.msgçš„æ¥å£æ–‡ä»¶ã€‚æ³¨æ„ï¼šmsgæ–‡ä»¶çš„å‘½åå¿…é¡»ä½¿ç”¨é©¼å³°å‘½åæ³•ã€‚ éœ€è¦åœ¨å¯¹åº”çš„CMakeList.txtæ–‡ä»¶ä¸­æ·»åŠ rosidl_generate_interfaces()ï¼Œå…¶ä¸ºcmakeå‡½æ•°ï¼Œç”¨äºå°†msgæ¶ˆæ¯æ¥å£å®šä¹‰æ–‡ä»¶è½¬åŒ–ä¸ºåº“æˆ–è€…å¤´æ–‡ä»¶ç±»ã€‚ å…·ä½“å®ç°ï¼š 123rosidl_generate_interfaces($&#123;PROJECT_NAME&#125; &quot;msg/SystemStatus.msg&quot; DEPENDENCIES builtin_interfaces ä»£ç å®ç°ï¼š 1234567builtin_interfaces/Time stamp #è®°å½•æ—¶é—´æˆ³string host_name #ä¸»æœºåfloat32 memory_percent #ä¸»å­˜ä½¿ç”¨ç‡float32 cpu_percent #CPUä½¿ç”¨ç‡float32 memory_available #ä¸»å­˜å‰©ä½™ç‡float64 net_send #ç½‘ç»œå‘é€ç‡float64 net_recv #ç½‘ç»œæ¥æ”¶ç‡ 2. ç³»ç»Ÿä¿¡æ¯è·å–å’Œå‘å¸ƒã€æ³¨ã€‘ï¼šä½¿ç”¨psutilså’Œplatformä¸¤ä¸ªåº“ä¸»è¦ç”¨äºè·å–ä¿¡æ¯ï¼›å…¶ä¸­psutilåº“å¯ä»¥æŸ¥è¯¢cpuåˆ©ç”¨ç‡ã€å†…å­˜æƒ…å†µå’Œç½‘ç»œè¾“å‡ºè¾“å…¥æƒ…å†µç­‰ã€‚platformåº“ç”¨äºæŸ¥è¯¢ä¸»æœºåå­—ç­‰ã€‚ ä»£ç å®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435import rclpyfrom rclpy.node import Nodefrom status_interfaces.msg import SystemStatusimport psutilimport platformclass SystemStatusPub(Node): def __init__(self, node_name): super().__init__(node_name) self.status_publisher_ = self.create_publisher(SystemStatus, &#x27;sys_status&#x27;, 10) self.time_ = self.create_timer(1.0, self.timer_callback) def timer_callback(self): cup_percent = psutil.cpu_percent() memory_info = psutil.virtual_memory() # æŸ¥çœ‹å½“å‰å†…å­˜æƒ…å†µ net_io_counters = psutil.net_io_counters() # æŸ¥çœ‹ç½‘ç»œè¾“å…¥è¾“å‡ºæƒ…å†µ msg = SystemStatus() # è‡ªå®šä¹‰çš„é€šä¿¡æ¥å£ç»è¿‡ä¸€ç³»åˆ—æ“ä½œå˜æˆäº†ç±» msg.stamp = self.get_clock().now().to_msg() # è·å–å½“å‰æ—¶é—´æˆ³å¹¶è½¬åŒ–ä¸ºä¿¡æ¯ msg.host_name = platform.node() # è¿”å›ä¸»æœºåå­— msg.cpu_percent = cup_percent msg.memory_percent = memory_info.percent msg.memory_available = memory_info.available /1024/1024# æœ‰æ•ˆå†…å­˜ msg.net_send = net_io_counters.packets_sent /1024/1024 # å°†å­—èŠ‚è½¬æ¢ä¸ºå…†å­—èŠ‚ msg.net_recv = net_io_counters.packets_recv /1024/1024 self.get_logger().info(f&quot;å‘å¸ƒç›¸å…³ä¿¡æ¯ï¼š&#123;msg&#125;&quot;) self.status_publisher_.publish(msg)def main(): rclpy.init() sys_status_pub = SystemStatusPub(&quot;status_publish&quot;) rclpy.spin(sys_status_pub) rclpy.shutdown() 3.è®¢é˜…æ•°æ®å¹¶ç”¨QTæ˜¾ç¤ºã€æ³¨ã€‘ ä½¿ç”¨new()åˆ›å»ºç±»åéœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œåªæœ‰é‡åˆ°â€delete()â€æ—¶æ‰ä¼šè°ƒç”¨ææ„å‡½æ•° ä½¿ç”¨â€ç±»å åˆ›å»ºçš„ç±»â€è¿™ç§ç±»å®šä¹‰å£°æ˜çš„æ–¹å¼ä½¿ç”¨åä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œè¿™ç§ç±»ä¸­çš„ææ„å‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ å…³äºç±»å¯¹è±¡çš„ä¸‰ç§åˆ›å»ºæ–¹æ³•ï¼š ç¬¬ä¸€ï¼šTest test1; æ ˆä¸­åˆ†é…ï¼Œç”±osè¿›è¡Œå†…å­˜åˆ†é…å’Œç®¡ç†ã€‚ ç¬¬äºŒï¼šTest test2 &#x3D; Test(); æ ˆä¸­åˆ†é…ï¼Œç”±osè¿›è¡Œå†…å­˜åˆ†é…å’Œç®¡ç†ã€‚ ç¬¬ä¸‰ï¼šTest *test3 &#x3D; new Test(); å †ä¸­åˆ†é…ï¼Œç”±ç®¡ç†è€…è¿›è¡Œå†…å­˜åˆ†é…å’Œç®¡ç†ï¼Œæ˜¾å¼ä½¿ç”¨delete()é‡Šæ”¾å†…å­˜ç©ºé—´ã€‚ â€œ.â€:æ˜¯ç»“æ„ä½“å¼•ç”¨ï¼Œâ€-&gt;â€:æ˜¯æŒ‡é’ˆå¼•ç”¨ã€‚ ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include &lt;QApplication&gt;#include &lt;QLabel&gt;#include &lt;QString&gt;#include &lt;rclcpp/rclcpp.hpp&gt;#include &quot;status_interfaces/msg/system_status.hpp&quot;using SystemStatus = status_interfaces::msg::SystemStatus; // å°†åŒ…åè¿›è¡Œæ”¹åclass SystemStatusDisplay : public rclcpp::Node&#123;private:/*data*/ rclcpp::Subscription&lt;SystemStatus&gt;::SharedPtr subscriber_;public: QLabel *label_ = new QLabel(); SystemStatusDisplay():Node(&quot;sys_status_display&quot;)&#123; // ä½¿ç”¨lambdaå‡½æ•°ä½œä¸ºå›è°ƒå‡½æ•°,æ¥æ”¶çš„å‡½æ•°ä¸ºå…±äº«æŒ‡é’ˆ subscriber_ = this-&gt;create_subscription&lt;SystemStatus&gt;(&quot;sys_status&quot;,10,[&amp;](const SystemStatus::SharedPtr msg)-&gt;void&#123; label_-&gt;setText(get_qstr_from_msg(msg)); &#125;); label_-&gt;setText(get_qstr_from_msg(std::make_shared&lt;SystemStatus&gt;())); // åˆå§‹ç»™labelä¼ ä¸€ä¸ªç©ºçš„å…±äº«æŒ‡é’ˆï¼Œè¿™æ ·æœ‰è¡¨å¤´æ²¡æœ‰å…·ä½“å†…å®¹ã€‚ label_-&gt;show(); &#125;; QString get_qstr_from_msg(const SystemStatus::SharedPtr msg)&#123; // å°†è·å–åˆ°çš„msgå†…å®¹è¿›è¡Œæ‹†åˆ†ç»„è£… std::stringstream show_str; show_str &lt;&lt; &quot;==========çŠ¶æ€å¯è§†åŒ–æ˜¾ç¤ºå·¥å…·============\\n&quot; &lt;&lt; &quot;æ•° æ® æ—¶ é—´:\\t&quot; &lt;&lt; msg-&gt;stamp.sec &lt;&lt; &quot;\\ts\\n&quot; &lt;&lt; &quot;ä¸» æœº å:\\t&quot; &lt;&lt; msg-&gt;host_name &lt;&lt; &quot;\\t\\n&quot; &lt;&lt; &quot;cpu åˆ© ç”¨ ç‡:\\t&quot; &lt;&lt; msg-&gt;cpu_percent &lt;&lt; &quot;\\t%\\n&quot; &lt;&lt; &quot;å†… å­˜ åˆ© ç”¨ ç‡:\\t&quot; &lt;&lt; msg-&gt;memory_percent &lt;&lt; &quot;\\t%\\n&quot; &lt;&lt; &quot;å‰© ä½™ æœ‰ æ•ˆ å†… å­˜:\\t&quot; &lt;&lt; msg-&gt;memory_available &lt;&lt; &quot;\\tMB\\n&quot; &lt;&lt; &quot;ç½‘ ç»œ å‘ é€ é‡:\\t&quot; &lt;&lt; msg-&gt;net_send &lt;&lt; &quot;\\tMB\\n&quot; &lt;&lt; &quot;ç½‘ ç»œ æ¥ æ”¶ é‡:\\t&quot; &lt;&lt; msg-&gt;net_recv &lt;&lt; &quot;\\tMB\\n&quot; &lt;&lt; &quot;=======================================&quot;; return QString::fromStdString(show_str.str()); &#125;;&#125;;int main(int argc, char* argv[])&#123; rclcpp::init(argc, argv); QApplication app(argc, argv); //ç±»å¯¹è±¡çš„å£°æ˜ auto node = std::make_shared&lt;SystemStatusDisplay&gt;(); // åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ä¸ºSystemStatusDisplayçš„å…±äº«æŒ‡é’ˆ std::thread spin_thread([&amp;]()-&gt;void&#123; rclcpp::spin(node); // ä¸ºå…¶å•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹ &#125;); spin_thread.detach(); app.exec(); rclcpp::shutdown(); return 0;&#125; å…³äºrclcpp::spin()ï¼šä¼šé˜»å¡è°ƒç”¨å®ƒçš„çº¿ç¨‹ï¼Œç›´åˆ°ä¸å®ƒå…³è”çš„èŠ‚ç‚¹è¢«é”€æ¯ã€‚å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œå®ƒæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š å¤„ç†å›è°ƒï¼šè°ƒç”¨æ‰€æœ‰å·²æ³¨å†Œçš„å›è°ƒï¼ŒåŒ…æ‹¬è®¢é˜…è€…çš„æ¶ˆæ¯å›è°ƒã€æœåŠ¡çš„è¯·æ±‚å›è°ƒã€å®šæ—¶å™¨å›è°ƒã€‚ äº‹ä»¶å¾ªç¯ï¼šå¤„ç†æ‰€æœ‰ROSé€šä¿¡ç›¸å…³çš„äº‹ä»¶ï¼Œç¡®ä¿èŠ‚ç‚¹èƒ½å¤Ÿå“åº”å¤–éƒ¨æ¶ˆæ¯å’ŒæœåŠ¡è¯·æ±‚ã€‚ é˜»å¡æ‰§è¡Œï¼šè¯¥å‡½æ•°ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°è°ƒç”¨å…¶çš„èŠ‚ç‚¹è¢«é”€æ¯æˆ–è€…æ˜¾ç¤ºåœ°è°ƒç”¨rclcpp::shutdown()ã€‚ å­¦ä¹ æ”¶è·ï¼š å¦‚ä½•æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰.msgæ–‡ä»¶ ï¼› å¦‚ä½•è·å–ç”µè„‘åŸºæœ¬å‚æ•°ä¿¡æ¯ï¼› å¦‚ä½•è¿›è¡Œå­—ç¬¦ä¸²æµè¾“å‡ºã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"è¯é¢˜é€šä¿¡å®æˆ˜_å‘å¸ƒæ§åˆ¶é€Ÿåº¦æµ·é¾Ÿç”»åœˆ","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_è¯é¢˜é€šä¿¡å®æˆ˜_å‘å¸ƒæ§åˆ¶é€Ÿåº¦æµ·é¾Ÿç”»åœˆ/","text":"è¯é¢˜é€šä¿¡å®æˆ˜_å‘å¸ƒæ§åˆ¶é€Ÿåº¦æµ·é¾Ÿç”»åœˆæ ¸å¿ƒè¦æ±‚ï¼š å¦‚ä½•è®©å°æµ·é¾ŸæŒ‰ç€æˆ‘çš„æŒ‡ä»¤ï¼Ÿè¯é¢˜ æ€ä¹ˆç”»åœ†ï¼Ÿçº¿é€Ÿåº¦&#x2F;è§’é€Ÿåº¦&#x3D;åŠå¾„ å‘ä¸€ä¸‹å°±åœï¼Œå¦‚ä½•å¾ªç¯å‘ï¼Ÿå®šæ—¶å™¨ 1.åˆ›å»ºç±» å±æ€§ï¼š å®šæ—¶å™¨ å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆ æ–¹æ³•ï¼š å®šæ—¶å‘å¸ƒæ§åˆ¶ä¿¡æ¯çš„å‡½æ•° ã€æ³¨ã€‘ï¼š å®šæ—¶å™¨å£°æ˜ä»£ç ï¼š 1rclcpp::Publisher&lt;æ¶ˆæ¯æ¥å£&gt;::SharedPtr å‘å¸ƒè€…å®ä¾‹å; å®šæ—¶å™¨åˆ›å»ºä»£ç ï¼š 1timer_ = this-&gt;create_wall_timer(é—´éš”æ—¶é•¿, å›è°ƒå‡½æ•°); â€œcreate_wall_timer()â€ä¹Ÿç§°ä¸ºå¢™é’Ÿå‡½æ•°ï¼Œå®ƒä¸ä¸€èˆ¬çš„å®šæ—¶å™¨å‡½æ•°ç›¸æ¯”ä½¿ç”¨çš„ä¸æ˜¯rosæ—¶é—´ï¼Œè€Œæ˜¯ç³»ç»Ÿæ—¶é—´ã€‚ 2.å®Œæ•´ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233#include &quot;rclcpp/rclcpp.hpp&quot;#include &quot;geometry_msgs/msg/twist.hpp&quot;#include &lt;chrono&gt;using namespace std::chrono_literals;class TurtleCircleNode: public rclcpp::Node&#123;private: rclcpp::TimerBase::SharedPtr timer_; rclcpp::Publisher&lt;geometry_msgs::msg::Twist&gt;::SharedPtr publisher_; //å‘å¸ƒè€…çš„æ™ºèƒ½æŒ‡é’ˆpublic: explicit TurtleCircleNode(const std::string&amp; node_name):Node(node_name) &#123; publisher_ = this-&gt;create_publisher&lt;geometry_msgs::msg::Twist&gt;(&quot;/turtle1/cmd_vel&quot;,10); timer_ = this-&gt;create_wall_timer(1000ms, std::bind(&amp;TurtleCircleNode::timer_callback,this)); &#125; void timer_callback()&#123; auto msg = geometry_msgs::msg::Twist(); msg.linear.x = 1.0; msg.angular.z = 0.5; publisher_-&gt;publish(msg); &#125;&#125;;int main(int argc,char* argv[])&#123; rclcpp::init(argc, argv); auto node = std::make_shared&lt;TurtleCircleNode&gt;(&quot;turtleCircle&quot;); rclcpp::spin(node); rclcpp::shutdown(); return 0;&#125; å­¦ä¹ æ”¶è·ï¼š å­¦ä¼šäº†å¢™é’Ÿå®šæ—¶å™¨çš„å£°æ˜å’Œåˆ›å»º","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"è¯é¢˜é€šä¿¡å®æˆ˜-è®¢é˜…å°è¯´å¹¶åˆæˆè¯­éŸ³","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_è¯é¢˜é€šä¿¡å®æˆ˜_è®¢é˜…å°è¯´å¹¶åˆæˆè¯­éŸ³/","text":"è¯é¢˜é€šä¿¡å®æˆ˜-è®¢é˜…å°è¯´å¹¶åˆæˆè¯­éŸ³æ ¸å¿ƒè¦æ±‚ï¼š 1. æ€ä¹ˆè®¢é˜…ï¼Ÿ 2. ç”¨ä»€ä¹ˆæœ—è¯»æ–‡æœ¬ï¼Ÿ Espeak 3. å°è¯´æ¥çš„å¿«ï¼Œè¯»å¾—æ…¢æ€ä¹ˆåŠï¼Ÿä½¿ç”¨é˜Ÿåˆ— 1. å®šä¹‰ä¸€ä¸ªç»§æ‰¿rclpy.nodeçš„èŠ‚ç‚¹ç±» å±æ€§ï¼š å­˜æ”¾å°è¯´çš„é˜Ÿåˆ— è®¢é˜…è€… çº¿ç¨‹å¯¹è±¡ æ–¹æ³•ï¼š å›è°ƒå‡½æ•°ï¼šç”¨äºä¸æ–­å°†å°è¯´æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚ çº¿ç¨‹å‡½æ•°ï¼šæ£€æµ‹åˆ°é˜Ÿåˆ—ä¸­å­˜åœ¨å°è¯´å°±å¼€å§‹æœ—è¯»ã€‚ ä¸‹è½½å°è¯´çš„å‡½æ•°ã€‚ ã€æ³¨ã€‘ï¼š åˆ›å»ºè®¢é˜…è€…çš„ä»£ç ï¼š 1self.create_subscription(æ¶ˆæ¯æ¥å£, &quot;è‡ªå®šä¹‰è¯é¢˜åç§°&quot;, å›è°ƒå‡½æ•°, qos) è¿™é‡Œçš„qoså°±æ˜¯å‰æ–‡æåˆ°çš„ros2ä¸­çš„é€šä¿¡æœåŠ¡è´¨é‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼›å‡½æ•°è¿”å›å€¼ä¸ºä¸€ä¸ªè®¢é˜…è€…å®ä¾‹ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„**â€è‡ªå®šä¹‰è¯é¢˜åç§°â€éœ€è¦ä¸è¯é¢˜å‘å¸ƒè€…çš„åç§°ç›¸åŒ**ï¼Œè¿™æ ·æ‰èƒ½è®¢é˜…åˆ°è¯é¢˜ã€‚ åˆ›å»ºçº¿ç¨‹çš„ä»£ç ï¼š 12self.speech_thread_=threading.Thread(target=çº¿ç¨‹å‡½æ•°,ä¼ ç»™çº¿ç¨‹å‡½æ•°çš„tupleç±»å‹å‚æ•°) self.speech_thread_.start() # æ³¨æ„pythonçš„çº¿ç¨‹ä¸ä¼šè‡ªå·±å¯åŠ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å§‹ â€œä¼ ç»™çº¿ç¨‹å‡½æ•°çš„tupleç±»å‹å‚æ•°â€æœ‰é»˜è®¤å€¼ï¼Œå¯ä»¥ä¸ä¼ å‚æ•°ã€‚ 2. å®Œæ•´ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import espeakng import rclpyfrom rclpy.node import Nodeimport requestsfrom example_interfaces.msg import Stringfrom queue import Queueimport threadingimport timeclass Novel_sub_Node(Node): def __init__(self, node_name): super().__init__(node_name) self.novel_queue = Queue() self.get_logger().info(f&quot;&#123;node_name&#125;,å¯åŠ¨ï¼&quot;) # åˆ›å»ºè®¢é˜…è€… å‚æ•°ï¼šä¿¡æ¯ç±»å‹ï¼Œè¯é¢˜åç§°ï¼ˆè¿™é‡Œä¸€å®šè¦ä¸å‘å¸ƒè€…å–çš„åå­—ä¸€è‡´ï¼‰ï¼Œå›è°ƒå‡½æ•°,qos self.novel_sub_ = self.create_subscription(String, &quot;novel&quot;, self.novel_callback, 10) self.speech_thread_ = threading.Thread(target=self.speak_thread) self.speech_thread_.start() # æ³¨æ„pythonçš„çº¿ç¨‹ä¸ä¼šè‡ªå·±å¯åŠ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å§‹ def novel_callback(self, msg): self.novel_queue.put(msg.data) def speak_thread(self): speaker = espeakng.Speaker() speaker.voice = &#x27;zh&#x27; while rclpy.ok(): # æ£€æµ‹å½“å‰ROSä¸Šä¸‹æ–‡æ˜¯å¦okï¼›ç”¨äºæ£€æŸ¥ROS2ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ï¼Œé€šå¸¸ç”¨äºæ§åˆ¶å¾ªç¯çš„æ‰§è¡Œï¼Œç¡®ä¿åœ¨ç³»ç»Ÿå…³é—­æ—¶èƒ½å¤Ÿä¼˜é›…åœ°é€€å‡ºã€‚ if self.novel_queue.qsize() &gt; 0: text = self.novel_queue.get() self.get_logger().info(f&quot;æœ—è¯»ï¼š&#123;text&#125;&quot;) speaker.say(text) speaker.wait() else: # å½“æœ—è¯»é˜Ÿåˆ—ä¸ºç©ºæ—¶ time.sleep(1) # è®©è¯¥çº¿ç¨‹ä¼‘çœ 1s def download(self, url): res = requests.get(url) res.encoding = &#x27;utf-8&#x27; text = res.text self.get_logger().info(f&quot;&#123;url&#125;,&#123;len(text)&#125;&quot;)def main(): rclpy.init() node = Novel_sub_Node(&quot;novel_sub&quot;) node.download(&quot;http://0.0.0.0:8000/novel1.txt&quot;) rclpy.spin(node) rclpy.shutdown() å­¦ä¹ æ”¶è·ï¼š è®¤è¯†äº†pythonä¸­å¯ä»¥è·å–æ–‡å­—å¹¶æœ—è¯»çš„åº“â€espeakngâ€ï¼Œä½¿ç”¨â€espeakng.Speaker()â€å¯ä»¥åˆ›å»ºä¸€ä¸ªespeakngå®ä¾‹ã€‚ å­¦ä¼šåˆ›å»ºè®¢é˜…è€…å’Œçº¿ç¨‹ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"è¯é¢˜é€šä¿¡å®æˆ˜-é€šè¿‡è¯é¢˜å‘å¸ƒå°è¯´","date":"2025-09-18T16:00:00.000Z","path":"2025/09/19/ros2/è¯é¢˜é€šä¿¡/ros_è¯é¢˜é€šä¿¡å®æˆ˜-é€šè¿‡è¯é¢˜å‘å¸ƒå°è¯´/","text":"è¯é¢˜é€šä¿¡å®æˆ˜-é€šè¿‡è¯é¢˜å‘å¸ƒå°è¯´éœ€æ±‚ï¼šä¸‹è½½å°è¯´å¹¶é€šè¿‡è¯é¢˜é—´éš”5så‘å¸ƒä¸€è¡Œæ ¸å¿ƒé—®é¢˜ï¼š 1. æ€ä¹ˆä¸‹è½½å°è¯´ï¼Ÿ ä½¿ç”¨requests; 2. æ€ä¹ˆå‘å¸ƒï¼Ÿç¡®å®šåå­—å’Œæ¥å£; 3. æ€ä¹ˆé—´éš”5så‘å¸ƒï¼ŸTimerå®šæ—¶å™¨ã€‚ 1. å®šä¹‰ä¸€ä¸ªç»§æ‰¿rclpy.nodeçš„èŠ‚ç‚¹ å±æ€§ï¼š å­˜æ”¾å°è¯´çš„é˜Ÿåˆ— å‘å¸ƒè€… å®šæ—¶å™¨ æ–¹æ³•ï¼š åˆ¤æ–­é˜Ÿåˆ—å¤§å°çš„å›è°ƒå‡½æ•° ä¸‹è½½å‡½æ•° ã€æ³¨ã€‘ï¼š åˆ›å»ºå‘å¸ƒè€…ä»£ç ï¼š 1self.create_publisher(æ¶ˆæ¯æ¥å£,&#x27;è‡ªå®šä¹‰è¯é¢˜åå­—&#x27;,æœåŠ¡è´¨é‡é…ç½®) å…³äºæœåŠ¡è´¨é‡é…ç½®æ˜¯ç»™ä¸€ä¸ªè¡¨ç¤ºé˜Ÿåˆ—å¤§å°çš„æ•°å­—ã€‚create_publisher()çš„è¿”å›å€¼ä¸º ä¸€ä¸ªå‘å¸ƒè€…ã€‚ åˆ›å»ºå®šæ—¶å™¨ä»£ç ï¼š 1self.create_timer(æ—¶é—´é—´éš”å‘¨æœŸ,è‡ªå®šä¹‰å›è°ƒå‡½æ•°) create_timer()æ²¡æœ‰è¿”å›å€¼ï¼Œå…¶ä¼šæŒ‰ç…§ä¼ å…¥çš„é—´éš”å‘¨æœŸå»è°ƒç”¨å›è°ƒå‡½æ•°ã€‚ 2. å®Œæ•´ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041import rclpyfrom rclpy.node import Nodeimport requestsfrom example_interfaces.msg import Stringfrom queue import Queueclass pubNode(Node): def __init__(self, node_name): super().__init__(node_name) self.get_logger().info(f&quot;&#123;node_name&#125;,å¯åŠ¨ï¼&quot;) self.novels_queue = Queue() # åˆ›å»ºé˜Ÿåˆ— # å‚æ•°ä¾æ¬¡ä¸ºï¼šæ¶ˆæ¯æ¥å£ï¼Œè¯é¢˜çš„åå­—(è‡ªå®šä¹‰)ï¼ŒæœåŠ¡è´¨é‡é…ç½®ï¼ˆç»™ä¸€ä¸ªè¡¨ç¤ºé˜Ÿåˆ—å¤§å°çš„æ•°å­—;è¿”å›å€¼ä¸ºå‘å¸ƒè€… self.novel_publisher_ = self.create_publisher(String,&#x27;novel&#x27;,100) self.create_timer(5,self.timer_callback) # å‚æ•°ï¼šæ—¶é—´é—´éš”å‘¨æœŸï¼Œå›è°ƒå‡½æ•° # åˆ¤æ–­é˜Ÿåˆ—å¤§å°-&gt;è‹¥å¤§äº0åˆ™ä»é˜Ÿåˆ—é‡Œé¢å–ä¸€è¡Œæ•°æ®-&gt;ç»„è£…æˆæ¶ˆæ¯-&gt;å‘å¸ƒæ¶ˆæ¯ def timer_callback(self): # è®¾ç½®ä¸€ä¸ªå›è°ƒå‡½æ•° if self.novels_queue.qsize() &gt; 0: line = self.novels_queue.get() msg = String() # ç»„è£…æ•°æ® msg.data = line self.novel_publisher_.publish(msg) self.get_logger().info(f&quot;å‘å¸ƒäº†ï¼š&#123;msg&#125;&quot;) # ä¸‹è½½ï¼šè·å–è¯·æ±‚-&gt;æŒ‰è¡Œåˆ†å‰²-&gt;æ”¾åˆ°é˜Ÿåˆ—é‡Œé¢ def download(self, url): res = requests.get(url) res.encoding = &#x27;utf-8&#x27; text = res.text # text.splitlines() #æŠŠä¸‹è½½çš„å†…å®¹æŒ‰è¡Œåˆ†å‰² self.get_logger().info(f&quot;ä¸‹è½½&#123;url&#125;,&#123;len(text)&#125;&quot;) for line in text.splitlines(): self.novels_queue.put(line) def main(): rclpy.init() node = pubNode(&quot;novel_pub&quot;) node.download(&quot;http://0.0.0.0:8000/novel1.txt&quot;) rclpy.spin(node) rclpy.shutdown() ã€ç¬”è®°ã€‘ï¼š example_interfaceï¼šæ ·ä¾‹æ¶ˆæ¯ç±»ã€‚ å›è°ƒå‡½æ•°ä¾èµ–çš„æˆå‘˜å˜é‡å®¹å™¨è¦æå‰åˆå§‹åŒ–ã€‚ â€œpython -m http.serverâ€ï¼šåœ¨å½“å‰ç›®å½•å¯åŠ¨ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œé»˜è®¤ç›‘å¬ç«¯å£ä¸º8000ã€‚","categories":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/categories/ROS2/"}],"tags":[{"name":"ROS2","slug":"ROS2","permalink":"http://example.com/tags/ROS2/"},{"name":"Topic_communication","slug":"Topic-communication","permalink":"http://example.com/tags/Topic-communication/"}]},{"title":"","date":"2025-09-18T10:43:02.063Z","path":"2025/09/18/è®°å½•æ‚ä¸ƒæ‚å…«å°é—®é¢˜/å®ç°Ubuntuä¸ä¸»æœºä¹‹é—´å¤åˆ¶ç²˜è´´/","text":"1.æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºé¡¶éƒ¨å·¥å…·æ ç‚¹å‡»â€è™šæ‹Ÿæœºè®¾ç½®â€-&gt;â€é€‰é¡¹â€-&gt;â€å®¢æˆ·æœºéš”ç¦»â€å‹¾é€‰ï¼Œå†æ¬¡å¯åŠ¨Ubuntuã€‚ 2.æ–¹æ³•äºŒï¼šä½¿ç”¨Ubuntuå‘½ä»¤ åœ¨ç»ˆç«¯ä¸­ä¾æ¬¡è¿è¡Œï¼š 123sudo su- //è¿›å…¥ç®¡ç†å‘˜æ¨¡å¼sudo apt-get install open-vm-tools open-vm-tools-desktop //å®‰è£…å‘½ä»¤vmware-user //å¼€å¯æœåŠ¡ æœ€åï¼Œé‡å¯è™šæ‹Ÿæœºå°±å¯ä»¥å®ç°è·¨å¹³å°å¤åˆ¶ç²˜è´´ã€‚ 3.æ–¹æ³•ä¸‰ï¼šï¼ˆæ°¸ä¹…å¼€å¯è¯¥æœåŠ¡ï¼‰ ç¼–å†™serviceé…ç½®æ–‡ä»¶ 1234567891011# /etc/systemd/system/vmware-user.service [Unit] Description=å¼€æœºå¯åŠ¨ä¸€æ¬¡vmware-user After=network.target [Service] Type=oneshot ExecStart=vmware-user [Install] WantedBy=multi-user.target é‡æ–°åŠ è½½systemdé…ç½® 1systemctl daemon-reload è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ 1systemctl enable vmware-user é‡å¯è™šæ‹ŸæœºååŸºæœ¬æˆåŠŸ","categories":[],"tags":[]},{"title":"åŸºæœ¬æ ¼å¼","date":"2025-09-18T08:28:11.787Z","path":"2025/09/18/åŸºç¡€ç›¸å…³/format/","text":"","categories":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"}],"tags":[]},{"title":"Hello Hexo","date":"2025-09-18T08:02:00.000Z","path":"2025/09/18/åŸºç¡€ç›¸å…³/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"}]},{"title":"Typoraçš„åŸºç¡€ä½¿ç”¨æ–¹æ³•","date":"2025-09-18T07:39:00.000Z","path":"2025/09/18/åŸºç¡€ç›¸å…³/Typora_use/","text":"æ³¨ï¼šåœ¨æ–‡ä»¶æœ€å‰é¢è¾“å…¥â€[â€œTOCâ€]â€ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯è·³è½¬çš„æ–‡ä»¶ç›®å½• [TOC] ä¸€.å…³äºæ ‡é¢˜è¿™æ˜¯äºŒçº§æ ‡é¢˜ç¬”è®°ï¼šå…³äºå¿«æ·é”®ã€ä½†æˆ‘çš„ç”µè„‘ä¸çŸ¥é“ä¸ºå•¥ç”¨ä¸äº†ã€‘ 1.Ctrl+æ•°å­—1-6å¯¹åº”å°†é€‰ä¸­æ–‡æœ¬è°ƒèŠ‚è‡³å¯¹åº”çº§åˆ«çš„æ ‡é¢˜ã€‚ 2.Ctrl+0å¯ä»¥å¿«é€Ÿå°†é€‰ä¸­çš„æ–‡æœ¬è°ƒæˆæ™®é€šæ–‡æœ¬ã€‚ 3.Ctrl+åŠ å·&#x2F;å‡å·å¯¹æ ‡é¢˜çº§åˆ«è¿›è¡Œè°ƒæ•´ã€‚ 4.â€œ#â€æ•°é‡æ§åˆ¶å­—ä½“çº§åˆ«ï¼Œæ³¨æ„â€#â€ä¸æ ‡é¢˜é—´æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ äºŒ.å…³äºæ¢è¡Œ1.â€œShiftâ€+â€œEnterâ€å¯ä»¥è¿›è¡Œæ¯”â€Shiftâ€æ›´å°çš„æ¢è¡Œã€‚ 2.â€œåˆ†å‰²çº¿â€ï¼šâ€œâ€”â€æŒ‰å›è½¦æˆ–è€…â€***â€æŒ‰å›è½¦ã€‚ ä¸‰.æ–‡å­—æ˜¾ç¤º1.å…³äºå­—ä½“ï¼ˆ1ï¼‰ç²—ä½“ï¼šç”¨ä¸€å¯¹åŒæ˜Ÿå·åŒ…è£¹ e.gï¼šè¿™æ˜¯ç²—ä½“ ï¼ˆ2ï¼‰å‰”é™¤çº¿ï¼šç”¨ä¸€å¯¹åŒé£˜å·åŒ…è£¹ e.g:è¿™æ˜¯å‰”é™¤çº¿ ï¼ˆ3ï¼‰ä¸‹åˆ’çº¿ï¼šç”¨ä¸€å¯¹uæ ‡ç­¾(html)åŒ…è£¹ e.g:è¿™æ˜¯ä¸‹åˆ’çº¿ ï¼ˆ4ï¼‰æ–œä½“ï¼šç”¨ä¸€å¯¹å•æ˜Ÿå·åŒ…è£¹ e.g:è¿™æ˜¯æ–œä½“ ï¼ˆ5ï¼‰é«˜äº®ï¼šç”¨ä¸€å¯¹åŒç­‰å·åŒ…è£¹ e.gï¼š&#x3D;&#x3D;è¿™æ˜¯é«˜äº®&#x3D;&#x3D; å¿«æ·é”®ï¼š(æŒ‰åŒæ•°æ¬¡å–æ¶ˆæ•ˆæœ) åŠ ç²—ï¼šCtrl+Båˆ é™¤çº¿ï¼šShift+Alt+5ä¸‹åˆ’çº¿ï¼šCtrl+uæ–œä½“ï¼šCtrl+i æ³¨ï¼šåæ–œæ +æ˜Ÿï¼šè§£å†³æ˜Ÿå·ä¸æ˜¾ç¤ºçš„é—®é¢˜ * 2.ä¸Šä¸‹æ ‡(1)ä¸€å¯¹â€^â€ï¼šè¡¨ç¤ºä¸Šæ ‡ã€‚ x^2^ (2)ä¸€å¯¹â€â€œï¼šè¡¨ç¤ºä¸‹æ ‡ã€‚ H2~O å››.åˆ—è¡¨1.æ— åºåˆ—è¡¨ï¼ˆ1ï¼‰åŒçº§åºå· ctrl+Shift+â€]â€ï¼šè¿›å…¥åºåˆ—ï¼Œä¸¤æ¬¡å›è½¦é€€å‡ºåºåˆ—ã€‚ ï¼ˆ2ï¼‰å­é›†åºåˆ—:Ctrl+â€]â€ï¼šåˆ—è¡¨å³ç¼©è¿›ã€‚ è¿™æ˜¯ä¸€çº§åºåˆ— è¿™æ˜¯äºŒçº§åºåˆ— åˆå˜ä¸€çº§ 2.æœ‰åºåˆ—è¡¨ï¼ˆ1ï¼‰åŒçº§åºå· ctrl+Shift+â€[â€œï¼šè¿›å…¥åºåˆ—ï¼Œä¸¤æ¬¡å›è½¦é€€å‡ºåºåˆ—ã€‚ (2) å­é›†åºåˆ—ï¼šå­é›†åºåˆ—:Ctrl+â€]â€ï¼šåˆ—è¡¨å³ç¼©è¿›ã€‚ 3.ä»»åŠ¡åˆ—è¡¨ :æ— åºåˆ—è¡¨ç¬¦+â€[ ]â€ äº”.åŒºå—æ˜¾ç¤º :â€è‹±æ–‡ç®­å¤´åŠ å›è½¦â€ã€‚ å…­.ä»£ç æ˜¾ç¤º1.è¡Œå†…ä»£ç  int a =2;:ç”¨ä¸€å¯¹â€œ&#96;â€åŒ…è£¹ã€‚ 2.ä»£ç å—ï¼šCtrl+Shift+K 123int a = 2;int b =3; 1#include &lt;iostream&gt; ä¸ƒ.é“¾æ¥å“”å“©å“”å“©ï¼šCtrl+K [ä¸€.å…³äºæ ‡é¢˜](# ä¸€.å…³äºæ ‡é¢˜)ï¼šå…³äºæ–‡ä»¶å†…æ ‡é¢˜è·³è½¬ï¼Œå‰é¢æ‹¬å·å†™æ˜¾ç¤ºå†…å®¹ï¼Œåé¢æ‹¬å·å†™å…¥è·³è½¬æ ‡é¢˜(è®°å¾—åŠ ä¸Šå¯¹åº”æ ¼å¼)ï¼›è·³è½¬çš„æ—¶å€™Ctrl+ç‚¹å‡»ã€‚ å…«.è„šæ³¨æ–‡å­—^1 ï¼šâ€œ[â€+â€^â€æƒ³è¦è„šæ³¨çš„æ–‡å­—+â€]â€ ä¸Šé¢çš„å®ç°ï¼šâ€œ[â€+â€^â€æƒ³è¦è„šæ³¨çš„æ–‡å­—+â€]â€:è§£é‡Šè¯´æ˜ã€‚ â€‹ æ³¨æ„ï¼šä¸Šä¸‹æƒ³è¦è„šæ³¨çš„æ–‡å­—çš„æ–‡å­—éœ€è¦ä¸€è‡´æ‰èƒ½æœ‰è„šæ³¨ï¼› â€‹ å†’å·è¦ç”¨è‹±æ–‡æ ¼å¼çš„ï¼› â€‹ â€œ&lt;â€brâ€&gt;â€ï¼šå¯ä»¥å®ç°å›è½¦ã€‚ ä¹.å›¾ç‰‡æ’å…¥![ä¸æ˜¾ç¤ºåªç»™å†™æ–‡ä»¶çš„äººæé†’çš„ä¸€æ®µæ–‡å­—](å›¾ç‰‡è·¯å¾„ â€œå›¾ç‰‡æ ‡é¢˜â€) è¿˜å¯ä»¥æ‹–æ‹½è¿›è¡Œæ·»åŠ å›¾ç‰‡ å.è¡¨æ ¼å¿«æ·é”®ï¼šCtrl+T id name score 23 å¼ ä¸‰ 99 3 æå›› 100 åä¸€.è¡¨æƒ…ç¬¦å·:happy: ã€:cry: ä¸¤ä¸ªå†’å·é—´åŠ å¯¹åº”è‹±æ–‡ï¼›ï¼ˆwin+. ï¼šå¯ä»¥å¿«é€Ÿæ‰“å¼€è¡¨æƒ…é¢æ¿ï¼‰ åäºŒ.æ•°å­¦å…¬å¼è¾“å…¥$$x^2+(y+1)^2&#x3D;5$$","categories":[{"name":"Typora","slug":"Typora","permalink":"http://example.com/categories/Typora/"}],"tags":[{"name":"Typora","slug":"Typora","permalink":"http://example.com/tags/Typora/"},{"name":"basic-Usage","slug":"basic-Usage","permalink":"http://example.com/tags/basic-Usage/"}]}]